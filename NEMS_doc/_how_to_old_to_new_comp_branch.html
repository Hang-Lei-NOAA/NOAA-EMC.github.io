<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.10"/>
<title>NEMS: Step 3. Updating Component Branches</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="make-images-fit.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">NEMS
   &#160;<span id="projectnumber">master@fb387d39b5</span>
   </div>
   <div id="projectbrief">This is a living document and may be updated at any time.</div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.10 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('_how_to_old_to_new_comp_branch.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Step 3. Updating Component Branches </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h2>Step 3.1: </h2>
<p>The next step is to manually merge changes from the old gsm branch to the new branch created from the trunk. To see the changes made in the old GSM branch, we can look at the trac page:</p>
<ul>
<li><a href="https://svnemc.ncep.noaa.gov/trac/gsm/changeset?reponame=&new=84116%40branches%2Fmeixner%2Ftwowaywavcoup&old=80525%40trunk">https://svnemc.ncep.noaa.gov/trac/gsm/changeset?reponame=&amp;new=84116%40branches%2Fmeixner%2Ftwowaywavcoup&amp;old=80525%40trunk</a></li>
</ul>
<p>Skipping the changes that are simply extra spaces, these changes were put into the r93335 GSM branch created in Step 6:</p>
<ul>
<li><a href="https://svnemc.ncep.noaa.gov/projects/gsm/branches/NEMSUpdate/UGCSWeather">https://svnemc.ncep.noaa.gov/projects/gsm/branches/NEMSUpdate/UGCSWeather</a></li>
</ul>
<p>I can confirm that these are in fact the changes I want again using the trac page:</p>
<ul>
<li><a href="https://svnemc.ncep.noaa.gov/trac/gsm/changeset?reponame=&new=93335%40branches%2FNEMSUpdate%2FUGCSWeather&old=89613%40trunk">https://svnemc.ncep.noaa.gov/trac/gsm/changeset?reponame=&amp;new=93335%40branches%2FNEMSUpdate%2FUGCSWeather&amp;old=89613%40trunk</a></li>
</ul>
<h2>Step 3.2: </h2>
<p>When GSM moved to having a cap like the other components, some files moved from being stored in the NEMS repository to being stored in GSM, such as: </p><pre class="fragment">&lt;nems trunk/branch&gt;/src/atmos/share      ---&gt;    gsm/trunk/share
&lt;nems trunk/branch&gt;/src/atmos/post       ---&gt;    gsm/trunk/post
</pre><p>To see what changes I had made that would need to be merged from the old version of NEMS to the new branch of GSM, I looked at the trac page</p>
<ul>
<li><a href="https://svnemc.ncep.noaa.gov/trac/nems/changeset?reponame=&new=84203%40branches%2FUGCS-Seasonal%2FtwoWayWW3_from_r80562&old=80562%40trunk">https://svnemc.ncep.noaa.gov/trac/nems/changeset?reponame=&amp;new=84203%40branches%2FUGCS-Seasonal%2FtwoWayWW3_from_r80562&amp;old=80562%40trunk</a></li>
</ul>
<p>For this example, the only updates were to share/module_CPLFIELDS.F90 These updates are now in the revision 93343 of the fowllowing GSM branch</p>
<ul>
<li><a href="https://svnemc.ncep.noaa.gov/projects/gsm/branches/NEMSUpdate/UGCSWeather">https://svnemc.ncep.noaa.gov/projects/gsm/branches/NEMSUpdate/UGCSWeather</a></li>
</ul>
<p>Now all of the GSM updates should be in the new GSM branch.</p>
<h2>Step 3.3: </h2>
<p>Now we need to merge the appropriate changes from the old branch of nems into the new branch of nems. Again, we can look at the trac page for what changes were previously made</p>
<ul>
<li><a href="https://svnemc.ncep.noaa.gov/trac/nems/changeset?reponame=&new=84203%40branches%2FUGCS-Seasonal%2FtwoWayWW3_from_r80562&old=80562%40trunk">https://svnemc.ncep.noaa.gov/trac/nems/changeset?reponame=&amp;new=84203%40branches%2FUGCS-Seasonal%2FtwoWayWW3_from_r80562&amp;old=80562%40trunk</a></li>
</ul>
<p>Only modified files that remain in the new nems branch (and are not files which have been moved to the App level) need to be updated. In this case, these files are <code>NEMSAppBuilder</code> and <code>src/module_EARTH_GRID_COMP.F90</code>. Note that although there is still a file named <code>NEMSCompsetRun</code>, this file is not the same as the old <code>NEMSCompsetRun</code> and therefore should not be updated.</p>
<p>These changes were checked into r93381 of the follwoing branch of nems</p>
<ul>
<li><a href="https://svnemc.ncep.noaa.gov/projects/nems/branches/NEMSUpdate/UGCSWeather">https://svnemc.ncep.noaa.gov/projects/nems/branches/NEMSUpdate/UGCSWeather</a></li>
</ul>
<h2>Step 3.4: </h2>
<p>At this point the changes that remain in your nems branch are either in now obsolete files or files that moved to the app level. Some files to update on the app level include: nems/test/nems.configure.*.IN &ndash;&gt; app/parm/nems.configure.*.IN nems/test/gsm_config &ndash;&gt; app/compset/gsm_config Note there may be more files that you have to update that are not listed here.</p>
<h2>Step 3.5: </h2>
<p>If you are using revision numbers in your svn:externals, make sure to update these revision numbers to point to the head of the externals (by not specifying a revision number). </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.10 </li>
  </ul>
</div>
</body>
</html>
