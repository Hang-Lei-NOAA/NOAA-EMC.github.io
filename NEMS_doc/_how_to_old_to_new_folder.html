<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.10"/>
<title>NEMS: Step 1. Setting up new folder Structure</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="make-images-fit.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">NEMS
   &#160;<span id="projectnumber">master@eee10ef0fe</span>
   </div>
   <div id="projectbrief">This is a living document and may be updated at any time.</div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.10 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('_how_to_old_to_new_folder.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Step 1. Setting up new folder Structure </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h2>Step 1.1: </h2>
<p>Determine where your app is going. In this case, we are moving the app from WW3TestBed to the UGCSWeather App in a branch called UpdateStructure. Most likely in your case, you will just be making a branch called UpdateStructure in your current App directory.</p>
<h2>Step 1.2: </h2>
<p>Determine which app in the updated structure most closely resembles your app. To see the status of NEMS Apps go to</p>
<ul>
<li><a href="https://vlab.ncep.noaa.gov/web/environmental-modeling-center/nems-applications">https://vlab.ncep.noaa.gov/web/environmental-modeling-center/nems-applications</a></li>
</ul>
<p>If you have a GSM based app, this app is the NEMSGSM app</p>
<ul>
<li><a href="https://svnemc.ncep.noaa.gov/projects/nems/apps/NEMSGSM/trunk/">https://svnemc.ncep.noaa.gov/projects/nems/apps/NEMSGSM/trunk/</a></li>
</ul>
<h2>Step 1.3: </h2>
<p>Create your directory structure. If possible, do this by copying the reference app trunk. For us, we will copy the NEMSGSM trunk, so: </p><pre class="fragment">svn copy https://svnemc.ncep.noaa.gov/projects/nems/apps/NEMSGSM/trunk/ https://svnemc.ncep.noaa.gov/projects/nems/apps/UGCS-Weather/branches/UpdateStructure
</pre><dl class="todo"><dt><b><a class="el" href="todo.html#_todo000042">Todo:</a></b></dt><dd>Make sure all updates put in this branch are in the NEMSGSM trunk now too</dd></dl>
<h2>Step 1.4: </h2>
<p>Now check out your new app: </p><pre class="fragment">svn co https://svnemc.ncep.noaa.gov/projects/nems/apps/UGCS-Weather/branches/UpdateStructure UpdateStructure 
</pre><h2>Step 1.5: </h2>
<p>Look at the new app structure and externals: </p><pre class="fragment">$ cd UpdateStructure 
$ ls 
CHEM      conf    GSM  modulefiles  oldtests  standaloneGSM.appBuilder
compsets  doc    log  NEMS      parm        standaloneGSM%gocart.appBuilder
$svn propget svn:externals 
NEMS     -r92559      https://svnemc.ncep.noaa.gov/projects/nems/trunk
GSM      -r89107      https://svnemc.ncep.noaa.gov/projects/gsm/trunk
CHEM     -r85947      https://svnemc.ncep.noaa.gov/projects/aerosol/chem/trunk
</pre><p>At the application level, there are 7 folders and several <code>&lt;appconfig&gt;.appBuilder</code> files. Many things that were previously kept in NEMS, such as the equivalent of compsets, are now kept at the application level. The appBuilder files give information about components for each application configuration. A complete description of an appBuilder file can be found here.</p>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000043">Todo:</a></b></dt><dd>link to appbuilder file description </dd></dl>
<p>The name and contents of each app level folder is below. Note, these descriptions can also be found here.</p><dl class="todo"><dt><b><a class="el" href="todo.html#_todo000044">Todo:</a></b></dt><dd>link to repository structure</dd></dl>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000045">Todo:</a></b></dt><dd>replace with link to relevant page of compset runner documentation</dd></dl>
<ul>
<li>conf/ - build configuration files</li>
<li>compsets/ - definition of compsets for this application</li>
<li>doc/ - contains application-specific documentation</li>
<li>modulefiles/ - module files to load external dependencies such as NetCDF<ul>
<li>theia/ - module files for Theia machine</li>
<li>wcoss.cray/ - module files for the Cray partition of WCOSS</li>
<li>... more platform support ...</li>
</ul>
</li>
<li>parm/ - small parameter files for compsets. Large files are located outside of the repository.</li>
<li>log/ - subdirectory for log files from execution and compilation. These are placed in the repository log/ directory so that they can be used to track changes, by re-using compsets as regression tests.</li>
</ul>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000046">Todo:</a></b></dt><dd>The doc folder is not listed in the repository structure </dd></dl>
<p>Note that all of the external components are contained in folders with all caps and that the GSM and CHEM components no longer live in a subdirectory of NEMS. Now that many application specific items have been removed from NEMS to the application level, NEMS now contains the following elements, which are also described <a class="el" href="structure.html">here</a>.</p>
<p>Within NEMS/ resides:</p>
<ul>
<li>NEMSAppBuilder - script to build the NEMS application</li>
<li>NEMSCompsetRun</li>
<li>exe/ - built executables are placed here</li>
<li>src/ - NEMS code is located here</li>
<li>doc/ - NEMS level documentation.</li>
<li>test/ - test execution logic</li>
</ul>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000047">Todo:</a></b></dt><dd>In my version I also have oldtests (directory of old nems level things that have moved to app level... maybe this folder should be deleted?) and OldCompsetRun (prior version of compset runner)</dd></dl>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000048">Todo:</a></b></dt><dd>add description or link to NEMSCcompsetRun (and appbuilder) </dd></dl>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000049">Todo:</a></b></dt><dd>in <a class="el" href="structure.html">doc is missing</a> </dd></dl>
<h2>Step 1.6: </h2>
<p>Make branches from the trunk of the external components that will need to be modified. For this example, this is GSM and NEMS. Changes to these branches will be added later. </p><pre class="fragment">svn copy https://svnemc.ncep.noaa.gov/projects/gsm/trunk/ \
   https://svnemc.ncep.noaa.gov/projects/gsm/branches/NEMSUpdate/UGCSWeather \
   -m 'Creating branch for updating UGCSWeather to new NEMS'
svn copy https://svnemc.ncep.noaa.gov/projects/nems/trunk/ \
   https://svnemc.ncep.noaa.gov/projects/nems/branches/NEMSUpdate/UGCSWeather \
   -m 'Creating branch for updating UGCSWeather to new NEMS'
</pre><h2>Step 1.7: </h2>
<p>Update the externals to include any other components needed in the App and to point to any new branches made in the previous step. To do this first set the <code>$EDITOR</code> or <code>$SVN_EDITOR</code> environment variable to your preferred editor. It's best to add this to your <code>~/.cshrc</code> or equivalent file. Don't forget to source the file after updating it, with the following changes: </p><pre class="fragment">setenv SVN_EDITOR vi
</pre><p>or </p><pre class="fragment">export SVN_EDITOR=vi
</pre><p>Now, update the externals: </p><pre class="fragment">svn propedit svn:externals . 
</pre><p>To see the result of this step see the following tag</p>
<ul>
<li><a href="https://svnemc.ncep.noaa.gov/projects/nems/apps/UGCS-Weather/tags/NEMSTutorial/Step7">https://svnemc.ncep.noaa.gov/projects/nems/apps/UGCS-Weather/tags/NEMSTutorial/Step7</a> </li>
</ul>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.10 </li>
  </ul>
</div>
</body>
</html>
