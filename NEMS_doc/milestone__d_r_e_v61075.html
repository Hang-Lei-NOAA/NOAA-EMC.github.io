<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.10"/>
<title>NEMS: DREV61075: Reg-Hydro 0.1</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="make-images-fit.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">NEMS
   &#160;<span id="projectnumber">master@7bd61225cb</span>
   </div>
   <div id="projectbrief">This is a living document and may be updated at any time.</div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.10 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('milestone__d_r_e_v61075.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">DREV61075: Reg-Hydro 0.1 </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><dl class="section date"><dt>Date</dt><dd>9/1/2015</dd></dl>
<h2>Repository URL </h2>
<ul>
<li><a href="https://svnemc.ncep.noaa.gov/projects/nems/apps/Regional/trunk">https://svnemc.ncep.noaa.gov/projects/nems/apps/Regional/trunk</a></li>
</ul>
<h2>Description </h2>
<p>DREV61075: Regional 0.1, is an internal delivery of a modeling application in which GSM-CICE-MOM5 run side-by-side with WRF-Hydro as a hydraulics/routing component and LIS/Noah.3.3 as a land surface model. This is a technical milestone required to arrive at a fully coupled system. The global components (GSM-CICE-MOM5) are currently used in the system as stand ins for the regional atmosphere-ice-ocean components. (Full NUOPC interfaces are not yet available, e.g., for NMMB). Side-by-side indicates that the WRF-Hydro and LIS components do not communicate with the other components, so no coupling fields are exchanged. In order to run these components side-by-side they require forcing data input files relevant to the calendar and timesteps for the run.</p>
<p>NUOPC "caps" are provided for both WRF-Hydro and LIS allowing these components to work in NUOPC-compliant systems.</p>
<h2>Code Repositories </h2>
<p>WRF-Hydro source code is available in the <a href="https://esgf.esrl.noaa.gov/projects/couplednems/external_components">external_components directory of the NEMS SVN repository</a>. It is maintained there as a clone of the official WRF-Hydro repository at NCAR (privately hosted on GitHub). Specifically, the version used for the v0.1 Regional app is:</p>
<ul>
<li><a href="https://svnemc.ncep.noaa.gov/projects/nems/external_comps/WRFHYDRO/trunk/NDHM">https://svnemc.ncep.noaa.gov/projects/nems/external_comps/WRFHYDRO/trunk/NDHM</a> (revision 61047)</li>
</ul>
<p>LIS source code is also available in the external_components directory of the NEMS SVN repository. It is maintained as a clone of the official LIS repository hosted at NASA-NCCS (private access).</p>
<ul>
<li><a href="https://svnemc.ncep.noaa.gov/projects/nems/external_comps/LIS/branches/nuopc">https://svnemc.ncep.noaa.gov/projects/nems/external_comps/LIS/branches/nuopc</a> (revision 61000)</li>
</ul>
<p>Validation</p>
<p>Previous revisions of WRF-Hydro ran coupled to an atmosphere with an embedded land or standalone with its own embedded land. To isolate the hydraulics component of WRF-Hydro, a new function was added that is capable of reading land model output from file and is used in place of an active land component as input to the channel routing component. This feature was used in a native (outside NUOPC/NEMS) run of WRF-Hydro to generate a baseline output for a 24 hour run where land forcing data is provided hourly on a 268x260 domain. The native run produces hourly streamflow values at station locations with lat/lon coordinates. The outside NUOPC/NEMS standalone hydraulic component is compiled with the compile_offline_NoahMP.csh script. In order to turn off the embedded land the hrldas configuration file forcing type value must be set to 8. Validation is carried out through ncdiff comparison of the standalone run and regional run output of qlink1, the streamflow output, over a 4 hour time window on December 01, 2009. The land surface forcing data used was originally from a 2013 run, but the files were renamed to appear as a 2009 run in order to share a common time domain for the side-by-side run.</p>
<p>After building LIS using the compile script a LIS executable capable of running a standalone (outside NUOPC/NEMS) surface model is placed in the root directory. In order to run the LIS executable in standalone mode the lis configuration file running mode value is set to 'retrospective'. Validation is carried out through ncdiff comparisons of the standalone run and output of SoilMoist_tavg over a 4 hour time window on December 01, 2009.</p>
<p>Four hours is chosen as a quick test that will run in under 30 minutes on Theia.</p>
<h2>Run Sequence </h2>
<p>The NEMS run-time configuration for the default Regional configuration is provided below. Note that LND and HYD are run on disjoint processor sets, so they will run concurrently in each of the time loops and no data will be exchanged. For details on the run sequence in general please refer to the <a class="el" href="configuring.html">Configuring</a> and <a class="el" href="architecture.html">Architecture</a> pages. </p><pre class="fragment">runSeq::
  @7200.0
    OCN -&gt; MED :remapMethod=redist
    MED MedPhase_slow
    MED -&gt; OCN :remapMethod=redist
    OCN
    @3600.0
      MED MedPhase_fast_before
      MED -&gt; ATM :remapMethod=redist
      MED -&gt; ICE :remapMethod=redist
      ATM
              LND
      HYD
      ICE
      ATM -&gt; MED :remapMethod=redist
      ICE -&gt; MED :remapMethod=redist
      MED MedPhase_fast_after
    @
  @
::
</pre><h2>Build &amp; Run </h2>
<p>Instructions on how to build and run specific code revisions (e.g. this milestone revision) are provided on the Regional application page. </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.10 </li>
  </ul>
</div>
</body>
</html>
