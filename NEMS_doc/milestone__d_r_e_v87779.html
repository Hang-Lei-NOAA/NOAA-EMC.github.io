<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.10"/>
<title>NEMS: DREV87779: WAM-IPE 0.5 Physically Realistic One-Way WAM to IPE Coupling</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="make-images-fit.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">NEMS
   &#160;<span id="projectnumber">master@2db048d501</span>
   </div>
   <div id="projectbrief">This is a living document and may be updated at any time.</div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.10 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('milestone__d_r_e_v87779.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">DREV87779: WAM-IPE 0.5 Physically Realistic One-Way WAM to IPE Coupling </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><dl class="section date"><dt>Date</dt><dd>Last revised: 02/03/2017</dd></dl>
<h2>Repository URL </h2>
<ul>
<li><a href="https://svnemc.ncep.noaa.gov/projects/ipe/WAM-IPE">https://svnemc.ncep.noaa.gov/projects/ipe/WAM-IPE</a></li>
</ul>
<h2>Description </h2>
<p>This milestone is an internal release of a NEMS application with two active components. The active components are the Ionosphere Plasmasphere Electrodynamics (IPE) model and the Whole Atmosphere Model (WAM). All field exchanges in the system occur through the <a class="el" href="sw_mediator.html">space weather mediator</a>. This is a scientific milestone to ensure that the WAM-IPE coupled system is behaving correctly with data flowing one-way from WAM to IPE. In this revision WAM runs on a global 3D reduced Gaussian grid (WAM grid). The horizontal resolution is T62. The vertical component of this grid is 150 levels in pressure and has to be converted to height in order to couple with IPE. Because the relationship between pressure and height varies during a run, the actual heights of the levels of the WAM grid varies during a run. The maximum height of the WAM grid is approximately 800 km. In this revision IPE runs on an 80 x 170 flux tube grid ( <a class="el" href="_g_r_i_d__i_p_e.html">IPE grid</a>) that extends up to approximately 360,000 km. Because of the difference in heights, the WAM grid only overlaps with the bottom of the IPE grid. The amount of the overlap depends on the current height of the WAM grid.</p>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000023">Todo:</a></b></dt><dd>reference WAM-IPE in above paragraph</dd></dl>
<p>NUOPC "caps", which are essentially wrappers for the coupling interface, are provided for all model components allowing these components to work in NEMS and other NUOPC-compliant systems. For example, the "IPE cap" allows the IPE model to work as a part of the NEMS system.</p>
<p>In this release only a subset of possible fields are exchanged between WAM and IPE. The <a href="https://docs.google.com/a/noaa.gov/spreadsheets/d/1XaQZ-sli7AlZBDLXb30AvNladSuRlTVx5LZb22OMTe4/pubhtml">coupling fields spreadsheet</a> indicates in detail the status of the different coupled fields:</p>
<ul>
<li>The WAM output fields are extracted each time-step during the dynamics calculation part of the model code. The extraction and calculation necessary to generate the fields required by IPE are done by the subroutine get_w_z(). For efficiency's sake this is only done when WAM is running coupled to IPE. That this is occurring is indicated by setting the wam_ipe_coupling namelist variable to true. The fields are stored in the get_variables_for_WAM_IPE_coupling module. From there they are extracted by the WAM cap and passed out to the mediator.</li>
<li>The IPE input fields advertised only represent a subset of the full fields used by IPE. The reason for this is that the WAM and IPE grids only overlap at the bottom of the IPE grid. Transferring the entire IPE grid to the mediator would be inefficient, so only the part that potentially overlaps with WAM is transferred and used for regridding. In the IPE cap the fields received from the mediator are copied into a variable (wamfield) which has the full index space of the IPE fields. This transfer is complex because both representations of the data are collapsed to 1D for efficiency's sake. Once in the wamfield variable the data is extrapolated to fill the empty region. If acting as part of a coupled system (as in this milestone), IPE uses the data from wamfield as part of it's computations.</li>
</ul>
<h2>Build &amp; Run </h2>
<p>Instructions on how to build and run specific code revisions (e.g. this milestone revision) and the supported compsets are provided on the WAM-IPE Build &amp; Run page.</p>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000024">Todo:</a></b></dt><dd>reference the wam-ipe build and run page</dd></dl>
<h2>Run Sequence </h2>
<p>The NEMS run-time configuration for the default Regional configuration is provided below. For details on the run sequence in general please refer to the <a class="el" href="configuring.html">Configuring</a> and <a class="el" href="architecture.html">Architecture</a> pages. </p><pre class="fragment">runSeq::
 @21600.0
   ATM -&gt; MED :remapMethod=redist
   MED
   MED -&gt; IPM :remapMethod=redist
   ATM
   IPM
 @
::
</pre><h2>Validation </h2>
<p>During this test both components run for a 6 day simulation. IPE is driven by WAM fields: neutral temperature, and 3 components of the neutral wind. The coupling (calling) frequency is 3 minute. The run was made for 2013-03-16 under the intermediate solar flux condition (F107=120).</p>
<p>A test report is available for this validation run: <a class="el" href="_r_e_p_o_r_t-20170204-_w_a_m-_i_p_e-1way.html">One-Way WAM to IPE Coupling Test Report</a></p>
<h3>Comparison with Observations</h3>
<p>Figures 1 and 2 show that Total Electron Content (TEC) as calculated by IPE has reasonable agreement with TEC obtained from reanalysis data for the same date. The reanalysis data is obtained by using TEC observed by low earth orbit satellites, including COSMIC, GRACE, TerraSAR, Metop-A, Metop-B, Jason-2, and the Global Navigation Satellite System (GNSS) TEC1. The resolution is 5deg x 10deg x 30km and 1 hour. In both images, TEC is plotted as a function of geographic latitude and longitude.</p>
<div class="image">
<img src="DREV87779-reanalysis_tec_0317.png" alt="DREV87779-reanalysis_tec_0317.png"/>
<div class="caption">
Figure 1: Total Electron Content for 3/17/2013 from Reanalysis</div></div>
<div class="image">
<img src="DREV87779-ipe_tec_0316.png" alt="DREV87779-ipe_tec_0316.png"/>
<div class="caption">
Figure 2: Total Electron Content for 3/17/2013 from IPE model</div></div>
<h3>Demonstration of Variability Introduced from WAM</h3>
<p>Figures 3-8 show an example of the TEC every 6 days as a function of geographic longitude and latitude. It demonstrates that temporal and spatial evolution of the variability in TEC has been generated by the WAM fields that include forcing from the terrestrial weather (via tides, planetary waves, and gravity waves, etc.). In particular, the structure of the equatorial ionization anomaly (EIA, the density peaks on either side of the magnetic equator) have considerable amount of variation day by day due to the WAM winds and temperature only (even without WAM density and electrodynamics). Figure 3: Total Electron Content for 3/16/2013 from IPE model</p>
<div class="image">
<img src="DREV87779-ipe_tec_0317.png" alt="DREV87779-ipe_tec_0317.png"/>
<div class="caption">
Total Electron Content for 3/17/2013 from IPE model</div></div>
<div class="image">
<img src="DREV87779-ipe_tec_0318.png" alt="DREV87779-ipe_tec_0318.png"/>
<div class="caption">
Figure 5: Total Electron Content for 3/18/2013 from IPE model</div></div>
<div class="image">
<img src="DREV87779-ipe_tec_0319.png" alt="DREV87779-ipe_tec_0319.png"/>
<div class="caption">
Figure 6: Total Electron Content for 3/19/2013 from IPE model</div></div>
<div class="image">
<img src="DREV87779-ipe_tec_0320.png" alt="DREV87779-ipe_tec_0320.png"/>
<div class="caption">
Figure 7: Total Electron Content for 3/20/2013 from IPE model</div></div>
<div class="image">
<img src="DREV87779-ipe_tec_0320.png" alt="DREV87779-ipe_tec_0320.png"/>
<div class="caption">
Figure 7: Total Electron Content for 3/20/2013 from IPE modelipe_tec_0321.png Figure 8: Total Electron Content for 3/21/2013 from IPE model</div></div>
<h2>Limitations and Technical Notes </h2>
<p>In this milestone, IPE does not use the density fields (O, O2, N2) coming from WAM. The reason for this is that the version of WAM used here does not include the necessary chemistry for the upper atmosphere. Furthermore, the version of IPE used here does not include self-consistent electrodynamics.</p>
<ol type="1">
<li>Yue X. (2015). "Global ionospheric response during March 17-18, 2013 storm by reanalysis and TIEGCM simulation", presentation given at the Space-Atmosphere Interaction Region (SAIR) workshop. </li>
</ol>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.10 </li>
  </ul>
</div>
</body>
</html>
