
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>4. Inputs and Outputs &#8212; UFS Weather Model Users Guide  documentation</title>
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/classic.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="_static/custom.css" />
    
    <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="5. FAQ" href="FAQ.html" />
    <link rel="prev" title="3. Building and Running the UFS Weather Model" href="BuildingAndRunning.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="FAQ.html" title="5. FAQ"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="BuildingAndRunning.html" title="3. Building and Running the UFS Weather Model"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">UFS Weather Model Users Guide  documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href=""><span class="section-number">4. </span>Inputs and Outputs</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="inputs-and-outputs">
<span id="inputsoutputs"></span><h1><span class="section-number">4. </span>Inputs and Outputs<a class="headerlink" href="#inputs-and-outputs" title="Permalink to this headline">¶</a></h1>
<p>This chapter describes the input and output files needed for executing the model in the various supported configurations.</p>
<div class="section" id="input-files">
<h2><span class="section-number">4.1. </span>Input files<a class="headerlink" href="#input-files" title="Permalink to this headline">¶</a></h2>
<p>There are three types of files needed to execute a run: static datasets (<em>fix</em> files containing climatological
information), files that depend on grid resolution, initial and boundary conditions, and model configuration files (such as namelists).</p>
<div class="section" id="static-datasets-i-e-fix-files">
<h3><span class="section-number">4.1.1. </span>Static datasets (i.e., <em>fix files</em>)<a class="headerlink" href="#static-datasets-i-e-fix-files" title="Permalink to this headline">¶</a></h3>
<p>The static input files for global configurations are listed and described in <a class="reference internal" href="#fixfiles"><span class="std std-numref">Table 4.1</span></a>.  Similar files are used for a regional grid but are grid specific and generated by pre-processing utilities.</p>
<span id="fixfiles"></span><table class="colwidths-given docutils align-default" id="id3">
<caption><span class="caption-number">Table 4.1 </span><span class="caption-text"><em>Fix files containing climatological information</em></span><a class="headerlink" href="#id3" title="Permalink to this table">¶</a></caption>
<colgroup>
<col style="width: 44%" />
<col style="width: 56%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Filename</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>aerosol.dat</p></td>
<td><p>External aerosols data file</p></td>
</tr>
<tr class="row-odd"><td><p>CFSR.SEAICE.1982.2012.monthly.clim.grb</p></td>
<td><p>CFS reanalysis of monthly sea ice climatology</p></td>
</tr>
<tr class="row-even"><td><p>co2historicaldata_YYYY.txt</p></td>
<td><p>Monthly CO2 in PPMV data for year YYYY</p></td>
</tr>
<tr class="row-odd"><td><p>global_albedo4.1x1.grb</p></td>
<td><p>Four albedo fields for seasonal mean climatology: 2 for strong zenith angle dependent (visible and near IR)
and 2 for weak zenith angle dependent</p></td>
</tr>
<tr class="row-even"><td><p>global_glacier.2x2.grb</p></td>
<td><p>Glacier points, permanent/extreme features</p></td>
</tr>
<tr class="row-odd"><td><p>global_h2oprdlos.f77</p></td>
<td><p>Coefficients for the parameterization of photochemical production and loss of water (H2O)</p></td>
</tr>
<tr class="row-even"><td><p>global_maxice.2x2.grb</p></td>
<td><p>Maximum ice extent, permanent/extreme features</p></td>
</tr>
<tr class="row-odd"><td><p>global_mxsnoalb.uariz.t126.384.190.rg.grb</p></td>
<td><p>Climatological maximum snow albedo</p></td>
</tr>
<tr class="row-even"><td><p>global_o3prdlos.f77</p></td>
<td><p>Monthly mean ozone coefficients</p></td>
</tr>
<tr class="row-odd"><td><p>global_shdmax.0.144x0.144.grb</p></td>
<td><p>Climatological maximum vegetation cover</p></td>
</tr>
<tr class="row-even"><td><p>global_shdmin.0.144x0.144.grb</p></td>
<td><p>Climatological minimum vegetation cover</p></td>
</tr>
<tr class="row-odd"><td><p>global_slope.1x1.grb</p></td>
<td><p>Climatological slope type</p></td>
</tr>
<tr class="row-even"><td><p>global_snoclim.1.875.grb</p></td>
<td><p>Climatological snow depth</p></td>
</tr>
<tr class="row-odd"><td><p>global_snowfree_albedo.bosu.t126.384.190.rg.grb</p></td>
<td><p>Climatological snowfree albedo</p></td>
</tr>
<tr class="row-even"><td><p>global_soilmgldas.t126.384.190.grb</p></td>
<td><p>Climatological soil moisture</p></td>
</tr>
<tr class="row-odd"><td><p>global_soiltype.statsgo.t126.384.190.rg.grb</p></td>
<td><p>Soil type from the STATSGO dataset</p></td>
</tr>
<tr class="row-even"><td><p>global_tg3clim.2.6x1.5.grb</p></td>
<td><p>Climatological deep soil temperature</p></td>
</tr>
<tr class="row-odd"><td><p>global_vegfrac.0.144.decpercent.grb</p></td>
<td><p>Climatological vegetation fraction</p></td>
</tr>
<tr class="row-even"><td><p>global_vegtype.igbp.t126.384.190.rg.grb</p></td>
<td><p>Climatological vegetation type</p></td>
</tr>
<tr class="row-odd"><td><p>global_zorclim.1x1.grb</p></td>
<td><p>Climatological surface roughness</p></td>
</tr>
<tr class="row-even"><td><p>RTGSST.1982.2012.monthly.clim.grb</p></td>
<td><p>Monthly, climatological, real-time global sea surface temperature</p></td>
</tr>
<tr class="row-odd"><td><p>seaice_newland.grb</p></td>
<td><p>High resolution land mask</p></td>
</tr>
<tr class="row-even"><td><p>sfc_emissivity_idx.txt</p></td>
<td><p>External surface emissivity data table</p></td>
</tr>
<tr class="row-odd"><td><p>solarconstant_noaa_an.txt</p></td>
<td><p>External solar constant data table</p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="grid-description-and-initial-condition-files">
<h3><span class="section-number">4.1.2. </span>Grid description and initial condition files<a class="headerlink" href="#grid-description-and-initial-condition-files" title="Permalink to this headline">¶</a></h3>
<p>The input files containing grid information and the initial conditions for global configurations are listed and described in <a class="reference internal" href="#gridicfiles"><span class="std std-numref">Table 4.2</span></a>.  The input files for a limited area model (LAM) configuration including grid information and initial and lateral boundary conditions are listed and described in <a class="reference internal" href="#regionalgridicfiles"><span class="std std-numref">Table 4.3</span></a>.  Note that the regional grid is referred to as Tile 7 here, and are generated by several pre-processing utilities.</p>
<span id="gridicfiles"></span><table class="colwidths-given docutils align-default" id="id4">
<caption><span class="caption-number">Table 4.2 </span><span class="caption-text"><em>Input files containing grid information and initial conditions for global configurations</em></span><a class="headerlink" href="#id4" title="Permalink to this table">¶</a></caption>
<colgroup>
<col style="width: 35%" />
<col style="width: 50%" />
<col style="width: 15%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Filename</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Date-dependent</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Cxx_grid.tile[1-6].nc</p></td>
<td><p>Cxx grid information for tiles 1-6, where ‘xx’ is the grid number</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>gfs_ctrl.nc</p></td>
<td><p>NCEP NGGPS tracers, ak, and bk</p></td>
<td><p>✔</p></td>
</tr>
<tr class="row-even"><td><p>gfs_data.tile[1-6].nc</p></td>
<td><p>Initial condition fields (ps, u, v, u, z, t, q, O3). May include spfo3, spfo, spf02 if multiple gases are used</p></td>
<td><p>✔</p></td>
</tr>
<tr class="row-odd"><td><p>oro_data.tile[1-6].nc</p></td>
<td><p>Model terrain (topographic/orographic information) for grid tiles 1-6</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>sfc_ctrl.nc</p></td>
<td><p>Control parameters for surface input: forecast hour, date, number of soil levels</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>sfc_data.tile[1-6].nc</p></td>
<td><p>Surface properties for grid tiles 1-6</p></td>
<td><p>✔</p></td>
</tr>
</tbody>
</table>
<span id="regionalgridicfiles"></span><table class="colwidths-given docutils align-default" id="id5">
<caption><span class="caption-number">Table 4.3 </span><span class="caption-text"><em>Regional input files containing grid information and initial and lateral boundary conditions for regional configurations</em></span><a class="headerlink" href="#id5" title="Permalink to this table">¶</a></caption>
<colgroup>
<col style="width: 35%" />
<col style="width: 50%" />
<col style="width: 15%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Filename</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Date-dependent</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Cxx_grid.tile7.nc</p></td>
<td><p>Cxx grid information for tile 7, where ‘xx’ is the grid number</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>gfs_ctrl.nc</p></td>
<td><p>NCEP NGGPS tracers, ak, and bk</p></td>
<td><p>✔</p></td>
</tr>
<tr class="row-even"><td><p>gfs_bndy.tile7.HHH.nc</p></td>
<td><p>Lateral boundary conditions at hour HHH</p></td>
<td><p>✔</p></td>
</tr>
<tr class="row-odd"><td><p>gfs_data.tile7.nc</p></td>
<td><p>Initial condition fields (ps, u, v, u, z, t, q, O3). May include spfo3, spfo, spf02 if multiple gases are used</p></td>
<td><p>✔</p></td>
</tr>
<tr class="row-even"><td><p>oro_data.tile7.nc</p></td>
<td><p>Model terrain (topographic/orographic information) for grid tile 7</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>sfc_ctrl.nc</p></td>
<td><p>Control parameters for surface input: forecast hour, date, number of soil levels</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>sfc_data.tile7.nc</p></td>
<td><p>Surface properties for grid tile 7</p></td>
<td><p>✔</p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="model-configuration-files">
<h3><span class="section-number">4.1.3. </span>Model configuration files<a class="headerlink" href="#model-configuration-files" title="Permalink to this headline">¶</a></h3>
<p>The configuration files used by the UFS Weather Model are listed here and described below:</p>
<ul class="simple">
<li><p><em>diag_table</em></p></li>
<li><p><em>field_table</em></p></li>
<li><p><em>model_configure</em></p></li>
<li><p><em>nems.configure</em></p></li>
<li><p><em>suite_[suite_name].xml</em> (used only at build time)</p></li>
</ul>
<p>While the <em>input.nml</em> file is also a configuration file used by the UFS Weather Model, it is described in
<a class="reference internal" href="#inputnml"><span class="std std-numref">Section 4.1.4</span></a>.  The run-time configuration of model output fields is controlled by the combination of <em>diag_table</em> and <em>model_configure</em>, and is described in detail in <a class="reference internal" href="#outputfiles"><span class="std std-numref">Section 4.2</span></a>.</p>
<div class="section" id="diag-table-file">
<span id="diag-tablefile"></span><h4><span class="section-number">4.1.3.1. </span><em>diag_table</em> file<a class="headerlink" href="#diag-table-file" title="Permalink to this headline">¶</a></h4>
<p>There are three sections in file <em>diag_table</em>: Header (Global), File, and Field. These are described below.</p>
<p><strong>Header Description</strong></p>
<p>The Header section must reside in the first two lines of the <em>diag_table</em> file and contain the title and date
of the experiment (see example below).  The title must be a Fortran character string. The base date is the
reference time used for the time units, and must be greater than or equal to the model start time. The base date
consists of six space-separated integers in the following format:  <code class="docutils literal notranslate"><span class="pre">year</span> <span class="pre">month</span> <span class="pre">day</span> <span class="pre">hour</span> <span class="pre">minute</span> <span class="pre">second</span></code>.  Here is an example:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">20161003.00Z.C96.64bit.non-mono</span>
<span class="go">2016 10 03 00 0 0</span>
</pre></div>
</div>
<p><strong>File Description</strong></p>
<p>The File Description lines are used to specify the name of the file(s) to which the output will be written. They
contain one or more sets of six required and five optional fields (optional fields are denoted by square brackets
<code class="docutils literal notranslate"><span class="pre">[</span> <span class="pre">]</span></code>).  The lines containing File Descriptions can be intermixed with the lines containing Field Descriptions as
long as files are defined before fields that are to be written to them.  File entries have the following format:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">&quot;file_name&quot;, output_freq, &quot;output_freq_units&quot;, file_format, &quot;time_axis_units&quot;, &quot;time_axis_name&quot;</span>
<span class="go">[, new_file_freq, &quot;new_file_freq_units&quot;[, &quot;start_time&quot;[, file_duration, &quot;file_duration_units&quot;]]]</span>
</pre></div>
</div>
<p>These file line entries are described in <a class="reference internal" href="#filedescription"><span class="std std-numref">Table 4.4</span></a>.</p>
<span id="filedescription"></span><table class="colwidths-given docutils align-default" id="id6">
<caption><span class="caption-number">Table 4.4 </span><span class="caption-text"><em>Description of the six required and five optional fields used to define output file sampling rates.</em></span><a class="headerlink" href="#id6" title="Permalink to this table">¶</a></caption>
<colgroup>
<col style="width: 20%" />
<col style="width: 25%" />
<col style="width: 55%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>File Entry</p></th>
<th class="head"><p>Variable Type</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>file_name</p></td>
<td><p>CHARACTER(len=128)</p></td>
<td><p>Output file name without the trailing “.nc”</p></td>
</tr>
<tr class="row-odd"><td><p>output_freq</p></td>
<td><p>INTEGER</p></td>
<td><div class="line-block">
<div class="line">The period between records in the file_name:</div>
<div class="line-block">
<div class="line">&gt; 0  output frequency in output_freq_units.</div>
<div class="line">= 0  output frequency every time step (output_freq_units is ignored)</div>
<div class="line">=-1  output at end of run only (output_freq_units is ignored)</div>
</div>
</div>
</td>
</tr>
<tr class="row-even"><td><p>output_freq_units</p></td>
<td><p>CHARACTER(len=10)</p></td>
<td><p>The units in which output_freq is given.  Valid values are “years”, “months”, “days”, “minutes”, “hours”, or “seconds”.</p></td>
</tr>
<tr class="row-odd"><td><p>file_format</p></td>
<td><p>INTEGER</p></td>
<td><p>Currently only the netCDF file format is supported.  = 1  netCDF</p></td>
</tr>
<tr class="row-even"><td><p>time_axis_units</p></td>
<td><p>CHARACTER(len=10)</p></td>
<td><p>The units to use for the time-axis in the file.  Valid values are “years”, “months”, “days”, “minutes”, “hours”,
or “seconds”.</p></td>
</tr>
<tr class="row-odd"><td><p>time_axis_name</p></td>
<td><p>CHARACTER(len=128)</p></td>
<td><p>Axis name for the output file time axis.  The character string must contain the string ‘time’.
(mixed upper and lowercase allowed.)</p></td>
</tr>
<tr class="row-even"><td><p>new_file_freq</p></td>
<td><p>INTEGER, OPTIONAL</p></td>
<td><p>Frequency for closing the existing file, and creating a new file in new_file_freq_units.</p></td>
</tr>
<tr class="row-odd"><td><p>new_file_freq_units</p></td>
<td><p>CHARACTER(len=10), OPTIONAL</p></td>
<td><p>Time units for creating a new file:  either years, months, days, minutes, hours, or seconds.
NOTE: If the new_file_freq field is present, then this field must also be present.</p></td>
</tr>
<tr class="row-even"><td><p>start_time</p></td>
<td><p>CHARACTER(len=25), OPTIONAL</p></td>
<td><p>Time to start the file for the first time.  The format of this string is the same as the global date.
NOTE: The new_file_freq and the new_file_freq_units fields must be present to use this field.</p></td>
</tr>
<tr class="row-odd"><td><p>file_duration</p></td>
<td><p>INTEGER, OPTIONAL</p></td>
<td><p>How long file should receive data after start time in file_duration_units.  This optional field can only be
used if the start_time field is present.  If this field is absent, then the file duration will be equal to the
frequency for creating new files.  NOTE: The file_duration_units field must also be present if this field is present.</p></td>
</tr>
<tr class="row-even"><td><p>file_duration_units</p></td>
<td><p>CHARACTER(len=10), OPTIONAL</p></td>
<td><p>File duration units. Can be either years, months, days, minutes, hours, or seconds.  NOTE: If the file_duration field
is present, then this field must also be present.</p></td>
</tr>
</tbody>
</table>
<p><strong>Field Description</strong></p>
<p>The field section of the diag_table specifies the fields to be output at run time.  Only fields registered
with <code class="docutils literal notranslate"><span class="pre">register_diag_field()</span></code>, which is an API in the FMS <code class="docutils literal notranslate"><span class="pre">diag_manager</span></code> routine, can be used in the <em>diag_table</em>.</p>
<p>Registration of diagnostic fields is done using the following syntax</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">diag_id = register_diag_field(module_name, diag_name, axes, ...)</span>
</pre></div>
</div>
<p>in file <code class="docutils literal notranslate"><span class="pre">FV3/atmos_cubed_sphere/tools/fv_diagnostics.F90</span></code>.  As an example, the sea level pressure is registered as:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">id_slp = register_diag_field (trim(field), &#39;slp&#39;, axes(1:2), &amp;   Time, &#39;sea-level pressure&#39;, &#39;mb&#39;, missing_value=missing_value, range=slprange )</span>
</pre></div>
</div>
<p>All data written out by <code class="docutils literal notranslate"><span class="pre">diag_manager</span></code> is controlled via the <em>diag_table</em>.  A line in the field section of the
<em>diag_table</em> file contains eight variables with the following format:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">&quot;module_name&quot;, &quot;field_name&quot;, &quot;output_name&quot;, &quot;file_name&quot;, &quot;time_sampling&quot;, &quot;reduction_method&quot;, &quot;regional_section&quot;, packing</span>
</pre></div>
</div>
<p>These field section entries are described in <a class="reference internal" href="#fielddescription"><span class="std std-numref">Table 4.5</span></a>.</p>
<span id="fielddescription"></span><table class="colwidths-given docutils align-default" id="id7">
<caption><span class="caption-number">Table 4.5 </span><span class="caption-text"><em>Description of the eight variables used to define the fields written to the output files.</em></span><a class="headerlink" href="#id7" title="Permalink to this table">¶</a></caption>
<colgroup>
<col style="width: 17%" />
<col style="width: 25%" />
<col style="width: 58%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Field Entry</p></th>
<th class="head"><p>Variable Type</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>module_name</p></td>
<td><p>CHARACTER(len=128)</p></td>
<td><p>Module that contains the field_name variable.  (e.g. dynamic, gfs_phys, gfs_sfc)</p></td>
</tr>
<tr class="row-odd"><td><p>field_name</p></td>
<td><p>CHARACTER(len=128)</p></td>
<td><p>The name of the variable as registered in the model.</p></td>
</tr>
<tr class="row-even"><td><p>output_name</p></td>
<td><p>CHARACTER(len=128)</p></td>
<td><p>Name of the field as written in file_name.</p></td>
</tr>
<tr class="row-odd"><td><p>file_name</p></td>
<td><p>CHARACTER(len=128)</p></td>
<td><p>Name of the file where the field is to be written.</p></td>
</tr>
<tr class="row-even"><td><p>time_sampling</p></td>
<td><p>CHARACTER(len=50)</p></td>
<td><p>Currently not used.  Please use the string “all”.</p></td>
</tr>
<tr class="row-odd"><td><p>reduction_method</p></td>
<td><p>CHARACTER(len=50)</p></td>
<td><p>The data reduction method to perform prior to writing data to disk.  Current supported option is .false..  See <code class="docutils literal notranslate"><span class="pre">FMS/diag_manager/diag_table.F90</span></code> for more information.</p></td>
</tr>
<tr class="row-even"><td><p>regional_section</p></td>
<td><p>CHARACTER(len=50)</p></td>
<td><p>Bounds of the regional section to capture. Current supported option is “none”. See <code class="docutils literal notranslate"><span class="pre">FMS/diag_manager/diag_table.F90</span></code> for more information.</p></td>
</tr>
<tr class="row-odd"><td><p>packing</p></td>
<td><p>INTEGER</p></td>
<td><p>Fortran number KIND of the data written.  Valid values:  1=double precision, 2=float, 4=packed 16-bit integers, 8=packed 1-byte (not tested).</p></td>
</tr>
</tbody>
</table>
<p>Comments can be added to the diag_table using the hash symbol (<code class="docutils literal notranslate"><span class="pre">#</span></code>).</p>
<p>A brief example of the diag_table is shown below.  <code class="docutils literal notranslate"><span class="pre">“...”</span></code> denote where lines have been removed.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go"> 20161003.00Z.C96.64bit.non-mono</span>
<span class="go"> 2016 10 03 00 0 0</span>

<span class="go"> &quot;grid_spec&quot;,     -1,  &quot;months&quot;,   1, &quot;days&quot;,  &quot;time&quot;</span>
<span class="go"> &quot;atmos_4xdaily&quot;,  6,  &quot;hours&quot;,    1, &quot;days&quot;,  &quot;time&quot;</span>
<span class="go"> &quot;atmos_static&quot;   -1,  &quot;hours&quot;,    1, &quot;hours&quot;, &quot;time&quot;</span>
<span class="go"> &quot;fv3_history&quot;,    0,  &quot;hours&quot;,    1, &quot;hours&quot;, &quot;time&quot;</span>
<span class="go"> &quot;fv3_history2d&quot;,  0,  &quot;hours&quot;,    1, &quot;hours&quot;, &quot;time&quot;</span>

<span class="gp"> #</span>
<span class="gp"> #</span><span class="o">=======================</span>
<span class="gp"> #</span> ATMOSPHERE <span class="nv">DIAGNOSTICS</span>
<span class="gp"> #</span><span class="o">=======================</span>
<span class="gp"> #</span><span class="c1">##</span>
<span class="gp"> #</span> grid_spec
<span class="gp"> #</span><span class="c1">##</span>
<span class="go">  &quot;dynamics&quot;, &quot;grid_lon&quot;,  &quot;grid_lon&quot;,  &quot;grid_spec&quot;, &quot;all&quot;, .false.,  &quot;none&quot;, 2,</span>
<span class="go">  &quot;dynamics&quot;, &quot;grid_lat&quot;,  &quot;grid_lat&quot;,  &quot;grid_spec&quot;, &quot;all&quot;, .false.,  &quot;none&quot;, 2,</span>
<span class="go">  &quot;dynamics&quot;, &quot;grid_lont&quot;, &quot;grid_lont&quot;, &quot;grid_spec&quot;, &quot;all&quot;, .false.,  &quot;none&quot;, 2,</span>
<span class="go">  &quot;dynamics&quot;, &quot;grid_latt&quot;, &quot;grid_latt&quot;, &quot;grid_spec&quot;, &quot;all&quot;, .false.,  &quot;none&quot;, 2,</span>
<span class="go">  &quot;dynamics&quot;, &quot;area&quot;,      &quot;area&quot;,      &quot;grid_spec&quot;, &quot;all&quot;, .false.,  &quot;none&quot;, 2,</span>
<span class="gp"> #</span><span class="c1">##</span>
<span class="gp"> #</span> 4x daily output
<span class="gp"> #</span><span class="c1">##</span>
<span class="go">  &quot;dynamics&quot;,  &quot;slp&quot;,       &quot;slp&quot;,      &quot;atmos_4xdaily&quot;, &quot;all&quot;, .false.,  &quot;none&quot;, 2</span>
<span class="go">  &quot;dynamics&quot;,  &quot;vort850&quot;,   &quot;vort850&quot;,  &quot;atmos_4xdaily&quot;, &quot;all&quot;, .false.,  &quot;none&quot;, 2</span>
<span class="go">  &quot;dynamics&quot;,  &quot;vort200&quot;,   &quot;vort200&quot;,  &quot;atmos_4xdaily&quot;, &quot;all&quot;, .false.,  &quot;none&quot;, 2</span>
<span class="go">  &quot;dynamics&quot;,  &quot;us&quot;,        &quot;us&quot;,       &quot;atmos_4xdaily&quot;, &quot;all&quot;, .false.,  &quot;none&quot;, 2</span>
<span class="go">  &quot;dynamics&quot;,  &quot;u1000&quot;,     &quot;u1000&quot;,    &quot;atmos_4xdaily&quot;, &quot;all&quot;, .false.,  &quot;none&quot;, 2</span>
<span class="go">  &quot;dynamics&quot;,  &quot;u850&quot;,      &quot;u850&quot;,     &quot;atmos_4xdaily&quot;, &quot;all&quot;, .false.,  &quot;none&quot;, 2</span>
<span class="go">  &quot;dynamics&quot;,  &quot;u700&quot;,      &quot;u700&quot;,     &quot;atmos_4xdaily&quot;, &quot;all&quot;, .false.,  &quot;none&quot;, 2</span>
<span class="go">  &quot;dynamics&quot;,  &quot;u500&quot;,      &quot;u500&quot;,     &quot;atmos_4xdaily&quot;, &quot;all&quot;, .false.,  &quot;none&quot;, 2</span>
<span class="go">  &quot;dynamics&quot;,  &quot;u200&quot;,      &quot;u200&quot;,     &quot;atmos_4xdaily&quot;, &quot;all&quot;, .false.,  &quot;none&quot;, 2</span>
<span class="go">  &quot;dynamics&quot;,  &quot;u100&quot;,      &quot;u100&quot;,     &quot;atmos_4xdaily&quot;, &quot;all&quot;, .false.,  &quot;none&quot;, 2</span>
<span class="go">  &quot;dynamics&quot;,  &quot;u50&quot;,       &quot;u50&quot;,      &quot;atmos_4xdaily&quot;, &quot;all&quot;, .false.,  &quot;none&quot;, 2</span>
<span class="go">  &quot;dynamics&quot;,  &quot;u10&quot;,       &quot;u10&quot;,      &quot;atmos_4xdaily&quot;, &quot;all&quot;, .false.,  &quot;none&quot;, 2</span>

<span class="go"> ...</span>
<span class="gp"> #</span><span class="c1">##</span>
<span class="gp"> #</span> gfs static data
<span class="gp"> #</span><span class="c1">##</span>
<span class="go">  &quot;dynamics&quot;,  &quot;pk&quot;,        &quot;pk&quot;,       &quot;atmos_static&quot;,  &quot;all&quot;, .false.,  &quot;none&quot;, 2</span>
<span class="go">  &quot;dynamics&quot;,  &quot;bk&quot;,        &quot;bk&quot;,       &quot;atmos_static&quot;,  &quot;all&quot;, .false.,  &quot;none&quot;, 2</span>
<span class="go">  &quot;dynamics&quot;,  &quot;hyam&quot;,     &quot;hyam&quot;,      &quot;atmos_static&quot;,  &quot;all&quot;, .false.,  &quot;none&quot;, 2</span>
<span class="go">  &quot;dynamics&quot;,  &quot;hybm&quot;,     &quot;hybm&quot;,       &quot;atmos_static&quot;,  &quot;all&quot;, .false.,  &quot;none&quot;, 2</span>
<span class="go">  &quot;dynamics&quot;,  &quot;zsurf&quot;,    &quot;zsurf&quot;,      &quot;atmos_static&quot;,  &quot;all&quot;, .false.,  &quot;none&quot;, 2</span>
<span class="gp"> #</span><span class="c1">##</span>
<span class="gp"> #</span> FV3 variables needed <span class="k">for</span> NGGPS evaluation
<span class="gp"> #</span><span class="c1">##</span>
<span class="go"> &quot;gfs_dyn&quot;,    &quot;ucomp&quot;,      &quot;ugrd&quot;,     &quot;fv3_history&quot;,    &quot;all&quot;,  .false.,  &quot;none&quot;,  2</span>
<span class="go"> &quot;gfs_dyn&quot;,    &quot;vcomp&quot;,      &quot;vgrd&quot;,     &quot;fv3_history&quot;,    &quot;all&quot;,  .false.,  &quot;none&quot;,  2</span>
<span class="go"> &quot;gfs_dyn&quot;,    &quot;sphum&quot;,      &quot;spfh&quot;,     &quot;fv3_history&quot;,    &quot;all&quot;,  .false.,  &quot;none&quot;,  2</span>
<span class="go"> &quot;gfs_dyn&quot;,    &quot;temp&quot;,       &quot;tmp&quot;,      &quot;fv3_history&quot;,    &quot;all&quot;,  .false.,  &quot;none&quot;,  2</span>
<span class="go"> ...</span>
<span class="go"> &quot;gfs_phys&quot;,  &quot;ALBDO_ave&quot;,    &quot;albdo_ave&quot;, &quot;fv3_history2d&quot;, &quot;all&quot;, .false., &quot;none&quot;,  2</span>
<span class="go"> &quot;gfs_phys&quot;,  &quot;cnvprcp_ave&quot;,  &quot;cprat_ave&quot;, &quot;fv3_history2d&quot;, &quot;all&quot;, .false., &quot;none&quot;,  2</span>
<span class="go"> &quot;gfs_phys&quot;,  &quot;cnvprcpb_ave&quot;, &quot;cpratb_ave&quot;,&quot;fv3_history2d&quot;, &quot;all&quot;, .false., &quot;none&quot;,  2</span>
<span class="go"> &quot;gfs_phys&quot;,  &quot;totprcp_ave&quot;,  &quot;prate_ave&quot;, &quot;fv3_history2d&quot;, &quot;all&quot;, .false., &quot;none&quot;,  2</span>
<span class="go"> ...</span>
<span class="go"> &quot;gfs_sfc&quot;,   &quot;crain&quot;,   &quot;crain&quot;,    &quot;fv3_history2d&quot;,  &quot;all&quot;,  .false.,  &quot;none&quot;,  2</span>
<span class="go"> &quot;gfs_sfc&quot;,   &quot;tprcp&quot;,   &quot;tprcp&quot;,    &quot;fv3_history2d&quot;,  &quot;all&quot;,  .false.,  &quot;none&quot;,  2</span>
<span class="go"> &quot;gfs_sfc&quot;,   &quot;hgtsfc&quot;,  &quot;orog&quot;,     &quot;fv3_history2d&quot;,  &quot;all&quot;,  .false.,  &quot;none&quot;,  2</span>
<span class="go"> &quot;gfs_sfc&quot;,   &quot;weasd&quot;,   &quot;weasd&quot;,    &quot;fv3_history2d&quot;,  &quot;all&quot;,  .false.,  &quot;none&quot;,  2</span>
<span class="go"> &quot;gfs_sfc&quot;,   &quot;f10m&quot;,    &quot;f10m&quot;,     &quot;fv3_history2d&quot;,  &quot;all&quot;,  .false.,  &quot;none&quot;,  2</span>
<span class="go">...</span>
</pre></div>
</div>
<p>More information on the content of this file can be found in <code class="docutils literal notranslate"><span class="pre">FMS/diag_manager/diag_table.F90</span></code>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>None of the lines in the <em>diag_table</em> can span multiple lines.</p>
</div>
</div>
<div class="section" id="field-table-file">
<h4><span class="section-number">4.1.3.2. </span><em>field_table</em> file<a class="headerlink" href="#field-table-file" title="Permalink to this headline">¶</a></h4>
<p>The FMS field and tracer managers are used to manage tracers and specify tracer options.  All tracers
advected by the model must be registered in an ASCII table called <em>field_table</em>.  The field table consists
of entries in the following format:</p>
<dl class="simple">
<dt>The first line of an entry should consist of three quoted strings:</dt><dd><ul class="simple">
<li><p>The first quoted string will tell the field manager what type of field it is. The string <code class="docutils literal notranslate"><span class="pre">“TRACER”</span></code> is used to
declare a field entry.</p></li>
<li><p>The second quoted string will tell the field manager which model the field is being applied to.  The supported
type at present is <code class="docutils literal notranslate"><span class="pre">“atmos_mod”</span></code> for the atmosphere model.</p></li>
<li><p>The third quoted string should be a unique tracer name that the model will recognize.</p></li>
</ul>
</dd>
</dl>
<p>The second and following lines are called <code class="docutils literal notranslate"><span class="pre">methods</span></code>.  These lines can consist of two or three quoted strings.
The first string will be an identifier that the querying module will ask for. The second string will be a name
that the querying module can use to set up values for the module. The third string, if present, can supply
parameters to the calling module that can be parsed and used to further modify values.</p>
<p>An entry is ended with a  forward slash (/) as the final character in a row.  Comments can be inserted in the field table by having a hash symbol (#) as the first character in the line.</p>
<p>Below is an example of a field table entry for the tracer called <code class="docutils literal notranslate"><span class="pre">“sphum”</span></code>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">#</span> added by FRE: sphum must be present in atmos
<span class="gp">#</span> specific humidity <span class="k">for</span> moist runs
<span class="go"> &quot;TRACER&quot;, &quot;atmos_mod&quot;, &quot;sphum&quot;</span>
<span class="go">           &quot;longname&quot;,     &quot;specific humidity&quot;</span>
<span class="go">           &quot;units&quot;,        &quot;kg/kg&quot;</span>
<span class="go">           &quot;profile_type&quot;, &quot;fixed&quot;, &quot;surface_value=3.e-6&quot; /</span>
</pre></div>
</div>
<p>In this case, methods applied to this tracer include setting the long name to “specific humidity”, the units
to “kg/kg”. Finally a field named “profile_type” will be given a child field called “fixed”, and that field
will be given a field called “surface_value” with a real value of 3.E-6.  The “profile_type” options are listed
in <a class="reference internal" href="#tracertable"><span class="std std-numref">Table 4.6</span></a>.  If the profile type is “fixed” then the tracer field values are set equal
to the surface value.  If the profile type is “profile” then the top/bottom of model and surface values are read
and an exponential profile is calculated, with the profile being dependent on the number of levels in the component model.</p>
<span id="tracertable"></span><table class="colwidths-given docutils align-default" id="id8">
<caption><span class="caption-number">Table 4.6 </span><span class="caption-text"><em>Tracer profile setup from FMS/tracer_manager/tracer_manager.F90.</em></span><a class="headerlink" href="#id8" title="Permalink to this table">¶</a></caption>
<colgroup>
<col style="width: 20%" />
<col style="width: 25%" />
<col style="width: 55%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Method Type</p></th>
<th class="head"><p>Method Name</p></th>
<th class="head"><p>Method Control</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>profile_type</p></td>
<td><p>fixed</p></td>
<td><p>surface_value = X</p></td>
</tr>
<tr class="row-odd"><td><p>profile_type</p></td>
<td><p>profile</p></td>
<td><p>surface_value = X, top_value = Y (atmosphere)</p></td>
</tr>
</tbody>
</table>
<p>For the case of</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">&quot;profile_type&quot;,&quot;profile&quot;,&quot;surface_value = 1e-12, top_value = 1e-15&quot;</span>
</pre></div>
</div>
<p>in a 15 layer model this would return values of surf_value = 1e-12 and multiplier = 0.6309573,  i.e 1e-15 = 1e-12*(0.6309573^15).</p>
<p>A <code class="docutils literal notranslate"><span class="pre">method</span></code> is a way to allow a component module to alter the parameters it needs for various tracers. In essence,
this is a way to modify a default value. A namelist can supply default parameters for all tracers and a method, as
supplied through the field table, will allow the user to modify the default parameters on an individual tracer basis.
The lines in this file can be coded quite flexibly. Due to this flexibility, a number of restrictions are required.
See <code class="docutils literal notranslate"><span class="pre">FMS/field_manager/field_manager.F90</span></code> for more information.</p>
</div>
<div class="section" id="model-configure-file">
<span id="model-configurefile"></span><h4><span class="section-number">4.1.3.3. </span><em>model_configure</em> file<a class="headerlink" href="#model-configure-file" title="Permalink to this headline">¶</a></h4>
<p>This file contains settings and configurations for the NUOPC/ESMF main component, including the simulation
start time, the processor layout/configuration, and the I/O selections.  <a class="reference internal" href="#modelconfigparams"><span class="std std-numref">Table 4.7</span></a>
shows the following parameters that can be set in <em>model_configure</em> at run-time.</p>
<span id="modelconfigparams"></span><table class="colwidths-given docutils align-default" id="id9">
<caption><span class="caption-number">Table 4.7 </span><span class="caption-text"><em>Parameters that can be set in model_configure at run-time.</em></span><a class="headerlink" href="#id9" title="Permalink to this table">¶</a></caption>
<colgroup>
<col style="width: 24%" />
<col style="width: 35%" />
<col style="width: 18%" />
<col style="width: 24%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Parameter</p></th>
<th class="head"><p>Meaning</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Default Value</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>print_esmf</p></td>
<td><p>flag for ESMF PET files</p></td>
<td><p>logical</p></td>
<td><p>.true.</p></td>
</tr>
<tr class="row-odd"><td><p>PE_MEMBER01</p></td>
<td><p>total number of tasks for ensemble number 1</p></td>
<td><p>integer</p></td>
<td><p>150 (for c96 with quilt)</p></td>
</tr>
<tr class="row-even"><td><p>start_year</p></td>
<td><p>start year of model integration</p></td>
<td><p>integer</p></td>
<td><p>2019</p></td>
</tr>
<tr class="row-odd"><td><p>start_month</p></td>
<td><p>start month of model integration</p></td>
<td><p>integer</p></td>
<td><p>09</p></td>
</tr>
<tr class="row-even"><td><p>start_day</p></td>
<td><p>start day of model integration</p></td>
<td><p>integer</p></td>
<td><p>12</p></td>
</tr>
<tr class="row-odd"><td><p>start_hour</p></td>
<td><p>start hour of model integration</p></td>
<td><p>integer</p></td>
<td><p>00</p></td>
</tr>
<tr class="row-even"><td><p>start_minute</p></td>
<td><p>start minute of model integration</p></td>
<td><p>integer</p></td>
<td><p>0</p></td>
</tr>
<tr class="row-odd"><td><p>start_second</p></td>
<td><p>start second of model integration</p></td>
<td><p>integer</p></td>
<td><p>0</p></td>
</tr>
<tr class="row-even"><td><p>nhours_fcst</p></td>
<td><p>total forecast length</p></td>
<td><p>integer</p></td>
<td><p>48</p></td>
</tr>
<tr class="row-odd"><td><p>dt_atmos</p></td>
<td><p>atmosphere time step in second</p></td>
<td><p>integer</p></td>
<td><p>1800 (for C96)</p></td>
</tr>
<tr class="row-even"><td><p>output_1st_tstep_rst</p></td>
<td><p>output first time step history file after restart</p></td>
<td><p>logical</p></td>
<td><p>.false.</p></td>
</tr>
<tr class="row-odd"><td><p>memuse_verbose</p></td>
<td><p>flag for printing out memory usage</p></td>
<td><p>logical</p></td>
<td><p>.false.</p></td>
</tr>
<tr class="row-even"><td><p>atmos_nthreads</p></td>
<td><p>number of threads for atmosphere</p></td>
<td><p>integer</p></td>
<td><p>4</p></td>
</tr>
<tr class="row-odd"><td><p>restart_interval</p></td>
<td><p>frequency to output restart file</p></td>
<td><p>integer</p></td>
<td><p>0 (write restart file at the end of integration)</p></td>
</tr>
<tr class="row-even"><td><p>quilting</p></td>
<td><p>flag to turn on quilt</p></td>
<td><p>logical</p></td>
<td><p>.true.</p></td>
</tr>
<tr class="row-odd"><td><p>write_groups</p></td>
<td><p>total number of groups</p></td>
<td><p>integer</p></td>
<td><p>2</p></td>
</tr>
<tr class="row-even"><td><p>write_tasks_per_group</p></td>
<td><p>total number of write tasks in each write group</p></td>
<td><p>integer</p></td>
<td><p>6</p></td>
</tr>
<tr class="row-odd"><td><p>output_history</p></td>
<td><p>flag to output history files</p></td>
<td><p>logical</p></td>
<td><p>.true.</p></td>
</tr>
<tr class="row-even"><td><p>num_files</p></td>
<td><p>number of output files</p></td>
<td><p>integer</p></td>
<td><p>2</p></td>
</tr>
<tr class="row-odd"><td><p>filename_base</p></td>
<td><p>file name base for the output files</p></td>
<td><p>character(255)</p></td>
<td><p>‘atm’ ‘sfc’</p></td>
</tr>
<tr class="row-even"><td><p>output_grid</p></td>
<td><p>output grid</p></td>
<td><p>character(255)</p></td>
<td><p>gaussian_grid</p></td>
</tr>
<tr class="row-odd"><td><p>output_file</p></td>
<td><p>output file format</p></td>
<td><p>character(255)</p></td>
<td><p>nemsio</p></td>
</tr>
<tr class="row-even"><td><p>imo</p></td>
<td><p>i-dimension for output grid</p></td>
<td><p>integer</p></td>
<td><p>384</p></td>
</tr>
<tr class="row-odd"><td><p>jmo</p></td>
<td><p>j-dimension for output grid</p></td>
<td><p>integer</p></td>
<td><p>190</p></td>
</tr>
<tr class="row-even"><td><p>nfhout</p></td>
<td><p>history file output frequency</p></td>
<td><p>integer</p></td>
<td><p>3</p></td>
</tr>
<tr class="row-odd"><td><p>nfhmax_hf</p></td>
<td><p>forecast length of high history file</p></td>
<td><p>integer</p></td>
<td><p>0 (0:no high frequency output)</p></td>
</tr>
<tr class="row-even"><td><p>nfhout_hf</p></td>
<td><p>high history file output frequency</p></td>
<td><p>integer</p></td>
<td><p>1</p></td>
</tr>
<tr class="row-odd"><td><p>nsout</p></td>
<td><p>output frequency of number of time step</p></td>
<td><p>integer</p></td>
<td><p>-1 (negative: turn off the option, 1: output history file at every time step)</p></td>
</tr>
</tbody>
</table>
<p><a class="reference internal" href="#modelconfigparamsnotchanged"><span class="std std-numref">Table 4.8</span></a> shows the following parameters in <em>model_configure</em> that
are not usually changed.</p>
<span id="modelconfigparamsnotchanged"></span><table class="colwidths-given docutils align-default" id="id10">
<caption><span class="caption-number">Table 4.8 </span><span class="caption-text"><em>Parameters that are not usually changed in model_configure at run-time.</em></span><a class="headerlink" href="#id10" title="Permalink to this table">¶</a></caption>
<colgroup>
<col style="width: 24%" />
<col style="width: 35%" />
<col style="width: 18%" />
<col style="width: 24%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Parameter</p></th>
<th class="head"><p>Meaning</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Default Value</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>total_member</p></td>
<td><p>total number of ensemble member</p></td>
<td><p>integer</p></td>
<td><p>1</p></td>
</tr>
<tr class="row-odd"><td><p>RUN_CONTINUE</p></td>
<td><p>Flag for more than one NEMS run</p></td>
<td><p>logical</p></td>
<td><p>.false.</p></td>
</tr>
<tr class="row-even"><td><p>ENS_SPS</p></td>
<td><p>flag for the ensemble stochastic coupling flag</p></td>
<td><p>logical</p></td>
<td><p>.false.</p></td>
</tr>
<tr class="row-odd"><td><p>calendar</p></td>
<td><p>type of calendar year</p></td>
<td><p>character(*)</p></td>
<td><p>‘gregorian’</p></td>
</tr>
<tr class="row-even"><td><p>fhrot</p></td>
<td><p>forecast hour at restart for nems/earth grid component clock in coupled model</p></td>
<td><p>integer</p></td>
<td><p>0</p></td>
</tr>
<tr class="row-odd"><td><p>cpl</p></td>
<td><p>flag for coupling with MOM6/CICE5</p></td>
<td><p>logical</p></td>
<td><p>.false.</p></td>
</tr>
<tr class="row-even"><td><p>write_dopost</p></td>
<td><p>flag to do post on write grid component</p></td>
<td><p>logical</p></td>
<td><p>.false.</p></td>
</tr>
<tr class="row-odd"><td><p>ideflate</p></td>
<td><p>lossless compression level</p></td>
<td><p>integer</p></td>
<td><p>1 (0:no compression, range 1-9)</p></td>
</tr>
<tr class="row-even"><td><p>nbits</p></td>
<td><p>lossy compression level</p></td>
<td><p>integer</p></td>
<td><p>14 (0: lossless, range 1-32)</p></td>
</tr>
<tr class="row-odd"><td><p>write_nemsioflip</p></td>
<td><p>flag to flip the vertical level for nemsio file</p></td>
<td><p>logical</p></td>
<td><p>.true.</p></td>
</tr>
<tr class="row-even"><td><p>write_fsyncflag</p></td>
<td><p>flag to check if a file is synced to disk</p></td>
<td><p>logical</p></td>
<td><p>.true.</p></td>
</tr>
<tr class="row-odd"><td><p>iau_offset</p></td>
<td><p>IAU offset lengdth</p></td>
<td><p>integer</p></td>
<td><p>0</p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="nems-configure-file">
<h4><span class="section-number">4.1.3.4. </span><em>nems.configure</em> file<a class="headerlink" href="#nems-configure-file" title="Permalink to this headline">¶</a></h4>
<p>This file contains information about the various NEMS components and their run sequence. In the current release,
this is an atmosphere-only model, so this file is simple and does not need to be changed.  A sample of the file contents is below:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">EARTH_component_list: ATM</span>
<span class="go">ATM_model:            fv3</span>
<span class="go">runSeq::</span>
<span class="go">  ATM</span>
<span class="go">::</span>
</pre></div>
</div>
</div>
<div class="section" id="the-sdf-suite-definition-file-file">
<h4><span class="section-number">4.1.3.5. </span><em>The SDF (Suite Definition File) file</em><a class="headerlink" href="#the-sdf-suite-definition-file-file" title="Permalink to this headline">¶</a></h4>
<p>There are two SDFs currently supported for the UFS Medium Range Weather App configuration: <em>suite_FV3_GFS_v15p2.xml</em> and <em>suite_FV3_GFS_v16beta.xml</em>.</p>
<p>There are two SDFs currently supported for the UFS Short Range Weather App configuration: <em>suite_FV3_GFS_v15p2.xml</em> and <em>suite_FV3_RRFS_v1alpha.xml</em>.</p>
<p>Detailed descriptions of the supported suites can be found with the <a class="reference external" href="https://dtcenter.ucar.edu/GMTB/v5.0.0/sci_doc/">CCPP v5.0.0 Scientific Documentation</a>.</p>
</div>
</div>
<div class="section" id="namelist-file-input-nml">
<span id="inputnml"></span><h3><span class="section-number">4.1.4. </span>Namelist file <code class="docutils literal notranslate"><span class="pre">input.nml</span></code><a class="headerlink" href="#namelist-file-input-nml" title="Permalink to this headline">¶</a></h3>
<p>The atmosphere model reads many parameters from a Fortran namelist file, named <em>input.nml</em>.  This file contains
several Fortran namelist records, some of which are always required, others of which are only used when selected
physics options are chosen.</p>
<p>The following link provides an in depth description of the namelist settings:</p>
<p><a class="reference external" href="https://dtcenter.ucar.edu/GMTB/v5.0.0/sci_doc/">https://dtcenter.ucar.edu/GMTB/v5.0.0/sci_doc/</a></p>
<p>The following link describes the various physics-related namelist records:</p>
<p><a class="reference external" href="https://dtcenter.ucar.edu/GMTB/v5.0.0/sci_doc/CCPPsuite_nml_desp.html">https://dtcenter.ucar.edu/GMTB/v5.0.0/sci_doc/CCPPsuite_nml_desp.html</a></p>
<p>The following link describes the stochastic physics namelist records:</p>
<p><a class="reference external" href="https://stochastic-physics.readthedocs.io/en/ufs-v1.1.0/namelist_options.html">https://stochastic-physics.readthedocs.io/en/ufs-v1.1.0/namelist_options.html</a></p>
<p>The following link describes some of the other namelist records (dynamics, grid, etc):</p>
<p><a class="reference external" href="https://noaa-emc.github.io/FV3_Dycore_ufs-v1.1.0/html/index.html">https://noaa-emc.github.io/FV3_Dycore_ufs-v1.1.0/html/index.html</a></p>
<p>The namelist section <code class="docutils literal notranslate"><span class="pre">&amp;interpolator_nml</span></code> is not used in this release, and any modifications to
it will have no effect on the model results.</p>
<div class="section" id="fms-io-nml">
<h4><span class="section-number">4.1.4.1. </span>fms_io_nml<a class="headerlink" href="#fms-io-nml" title="Permalink to this headline">¶</a></h4>
<p>The namelist section <code class="docutils literal notranslate"><span class="pre">&amp;fms_io_nml</span></code> of <code class="docutils literal notranslate"><span class="pre">input.nml</span></code> contains variables that control
reading and writing of restart data in netCDF format.  There is a global switch to turn on/off
the netCDF restart options in all of the modules that read or write these files. The two namelist
variables that control the netCDF restart options are <code class="docutils literal notranslate"><span class="pre">fms_netcdf_override</span></code> and <code class="docutils literal notranslate"><span class="pre">fms_netcdf_restart</span></code>.
The default values of both flags are .true., so by default, the behavior of the entire model is
to use netCDF IO mode. To turn off netCDF restart, simply set <code class="docutils literal notranslate"><span class="pre">fms_netcdf_restart</span></code> to .false..
The namelist variables used in <code class="docutils literal notranslate"><span class="pre">&amp;fms_io_nml</span></code> are described in <a class="reference internal" href="#id1"><span class="std std-numref">Table 4.9</span></a>.</p>
<span id="id1"></span><table class="colwidths-given docutils align-default" id="id11">
<caption><span class="caption-number">Table 4.9 </span><span class="caption-text"><em>Description of the &amp;fms_io_nml namelist section.</em></span><a class="headerlink" href="#id11" title="Permalink to this table">¶</a></caption>
<colgroup>
<col style="width: 28%" />
<col style="width: 44%" />
<col style="width: 17%" />
<col style="width: 11%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Variable Name</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Data Type</p></th>
<th class="head"><p>Default Value</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>fms_netcdf_override</p></td>
<td><p>If true, <code class="docutils literal notranslate"><span class="pre">fms_netcdf_restart</span></code> overrides the individual <code class="docutils literal notranslate"><span class="pre">do_netcdf_restart</span></code> value.  If false, individual module settings has a precedence over the global setting, therefore <code class="docutils literal notranslate"><span class="pre">fms_netcdf_restart</span></code> is ignored.</p></td>
<td><p>logical</p></td>
<td><p>.true.</p></td>
</tr>
<tr class="row-odd"><td><p>fms_netcdf_restart</p></td>
<td><p>If true, all modules using restart files will operate under netCDF mode.  If false, all modules using restart files will operate under binary mode.  This flag is effective only when <code class="docutils literal notranslate"><span class="pre">fms_netcdf_override</span></code> is .true. When <code class="docutils literal notranslate"><span class="pre">fms_netcdf_override</span></code> is .false., individual module setting takes over.</p></td>
<td><p>logical</p></td>
<td><p>.true.</p></td>
</tr>
<tr class="row-even"><td><p>threading_read</p></td>
<td><p>Can be ‘single’ or ‘multi’</p></td>
<td><p>character(len=32)</p></td>
<td><p>‘multi’</p></td>
</tr>
<tr class="row-odd"><td><p>format</p></td>
<td><p>Format of restart data.  Only netCDF format is supported in fms_io.</p></td>
<td><p>character(len=32)</p></td>
<td><p>‘netcdf’</p></td>
</tr>
<tr class="row-even"><td><p>read_all_pe</p></td>
<td><p>Reading can be done either by all PEs (default) or by only the root PE.</p></td>
<td><p>logical</p></td>
<td><p>.true.</p></td>
</tr>
<tr class="row-odd"><td><p>iospec_ieee32</p></td>
<td><p>If set, call mpp_open single 32-bit ieee file for reading.</p></td>
<td><p>character(len=64)</p></td>
<td><p>‘-N ieee_32’</p></td>
</tr>
<tr class="row-even"><td><p>max_files_w</p></td>
<td><p>Maximum number of write files</p></td>
<td><p>integer</p></td>
<td><p>40</p></td>
</tr>
<tr class="row-odd"><td><p>max_files_r</p></td>
<td><p>Maximum number of read files</p></td>
<td><p>integer</p></td>
<td><p>40</p></td>
</tr>
<tr class="row-even"><td><p>time_stamp_restart</p></td>
<td><p>If true, <code class="docutils literal notranslate"><span class="pre">time_stamp</span></code> will be added to the restart file name as a prefix.</p></td>
<td><p>logical</p></td>
<td><p>.true.</p></td>
</tr>
<tr class="row-odd"><td><p>print_chksum</p></td>
<td><p>If true, print out chksum of fields that are read and written through save_restart/restore_state.</p></td>
<td><p>logical</p></td>
<td><p>.false.</p></td>
</tr>
<tr class="row-even"><td><p>show_open_namelist_file_warning</p></td>
<td><p>Flag to warn that open_namelist_file should not be called when INTERNAL_FILE_NML is defined.</p></td>
<td><p>logical</p></td>
<td><p>.false.</p></td>
</tr>
<tr class="row-odd"><td><p>debug_mask_list</p></td>
<td><p>Set <code class="docutils literal notranslate"><span class="pre">debug_mask_list</span></code> to true to print out mask_list reading from mask_table.</p></td>
<td><p>logical</p></td>
<td><p>.false.</p></td>
</tr>
<tr class="row-even"><td><p>checksum_required</p></td>
<td><p>If true, compare checksums stored in the attribute of a field against the checksum after reading in the data.</p></td>
<td><p>logical</p></td>
<td><p>.true.</p></td>
</tr>
</tbody>
</table>
<p>This release of the UFS Weather Model sets the following variables in the <code class="docutils literal notranslate"><span class="pre">&amp;fms_io_nml</span></code> namelist:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">&amp;fms_io_nml</span>
<span class="go">  checksum_required = .false.</span>
<span class="go">  max_files_r = 100</span>
<span class="go">  max_files_w = 100</span>
<span class="go">/</span>
</pre></div>
</div>
</div>
<div class="section" id="namsfc">
<h4><span class="section-number">4.1.4.2. </span>namsfc<a class="headerlink" href="#namsfc" title="Permalink to this headline">¶</a></h4>
<p>The namelist section <code class="docutils literal notranslate"><span class="pre">&amp;namsfc</span></code> contains the filenames of the static datasets (i.e., <em>fix files</em>).
<a class="reference internal" href="#fixfiles"><span class="std std-numref">Table 4.1</span></a> contains a brief description of the climatological information in these files.
The variables used in <code class="docutils literal notranslate"><span class="pre">&amp;namsfc</span></code> to set the filenames are described in <a class="reference internal" href="#namsfc-nml"><span class="std std-numref">Table 4.10</span></a>.</p>
<span id="namsfc-nml"></span><table class="colwidths-given docutils align-default" id="id12">
<caption><span class="caption-number">Table 4.10 </span><span class="caption-text"><em>List of common variables in the *namsfc</em> namelist section used to set the filenames of
             static datasets.*</span><a class="headerlink" href="#id12" title="Permalink to this table">¶</a></caption>
<colgroup>
<col style="width: 17%" />
<col style="width: 44%" />
<col style="width: 17%" />
<col style="width: 22%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Variable Name</p></th>
<th class="head"><p>File contains</p></th>
<th class="head"><p>Data Type</p></th>
<th class="head"><p>Default Value</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>fnglac</p></td>
<td><p>Climatological glacier data</p></td>
<td><p>character*500</p></td>
<td><p>‘global_glacier.2x2.grb’</p></td>
</tr>
<tr class="row-odd"><td><p>fnmxic</p></td>
<td><p>Climatological maximum ice extent</p></td>
<td><p>character*500</p></td>
<td><p>‘global_maxice.2x2.grb’</p></td>
</tr>
<tr class="row-even"><td><p>fntsfc</p></td>
<td><p>Climatological surface temperature</p></td>
<td><p>character*500</p></td>
<td><p>‘global_sstclim.2x2.grb’</p></td>
</tr>
<tr class="row-odd"><td><p>fnsnoc</p></td>
<td><p>Climatological snow depth</p></td>
<td><p>character*500</p></td>
<td><p>‘global_snoclim.1.875.grb’</p></td>
</tr>
<tr class="row-even"><td><p>fnzorc</p></td>
<td><p>Climatological surface roughness</p></td>
<td><p>character*500</p></td>
<td><p>‘global_zorclim.1x1.grb’</p></td>
</tr>
<tr class="row-odd"><td><p>fnalbc</p></td>
<td><p>Climatological snowfree albedo</p></td>
<td><p>character*500</p></td>
<td><p>‘global_albedo4.1x1.grb’</p></td>
</tr>
<tr class="row-even"><td><p>fnalbc2</p></td>
<td><p>Four albedo fields for seasonal mean climatology</p></td>
<td><p>character*500</p></td>
<td><p>‘global_albedo4.1x1.grb’</p></td>
</tr>
<tr class="row-odd"><td><p>fnaisc</p></td>
<td><p>Climatological sea ice</p></td>
<td><p>character*500</p></td>
<td><p>‘global_iceclim.2x2.grb’</p></td>
</tr>
<tr class="row-even"><td><p>fntg3c</p></td>
<td><p>Climatological deep soil temperature</p></td>
<td><p>character*500</p></td>
<td><p>‘global_tg3clim.2.6x1.5.grb’</p></td>
</tr>
<tr class="row-odd"><td><p>fnvegc</p></td>
<td><p>Climatological vegetation cover</p></td>
<td><p>character*500</p></td>
<td><p>‘global_vegfrac.1x1.grb’</p></td>
</tr>
<tr class="row-even"><td><p>fnvetc</p></td>
<td><p>Climatological vegetation type</p></td>
<td><p>character*500</p></td>
<td><p>‘global_vegtype.1x1.grb’</p></td>
</tr>
<tr class="row-odd"><td><p>fnsotc</p></td>
<td><p>Climatological soil type</p></td>
<td><p>character*500</p></td>
<td><p>‘global_soiltype.1x1.grb’</p></td>
</tr>
<tr class="row-even"><td><p>fnsmcc</p></td>
<td><p>Climatological soil moisture</p></td>
<td><p>character*500</p></td>
<td><p>‘global_soilmcpc.1x1.grb’</p></td>
</tr>
<tr class="row-odd"><td><p>fnmskh</p></td>
<td><p>High resolution land mask field</p></td>
<td><p>character*500</p></td>
<td><p>‘global_slmask.t126.grb’</p></td>
</tr>
<tr class="row-even"><td><p>fnvmnc</p></td>
<td><p>Climatological minimum vegetation cover</p></td>
<td><p>character*500</p></td>
<td><p>‘global_shdmin.0.144x0.144.grb’</p></td>
</tr>
<tr class="row-odd"><td><p>fnvmxc</p></td>
<td><p>Climatological maximum vegetation cover</p></td>
<td><p>character*500</p></td>
<td><p>‘global_shdmax.0.144x0.144.grb’</p></td>
</tr>
<tr class="row-even"><td><p>fnslpc</p></td>
<td><p>Climatological slope type</p></td>
<td><p>character*500</p></td>
<td><p>‘global_slope.1x1.grb’</p></td>
</tr>
<tr class="row-odd"><td><p>fnabsc</p></td>
<td><p>Climatological maximum snow albedo</p></td>
<td><p>character*500</p></td>
<td><p>‘global_snoalb.1x1.grb’</p></td>
</tr>
</tbody>
</table>
<p>A sample subset of this namelist is shown below:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">&amp;namsfc</span>
<span class="go">  FNGLAC   = &#39;global_glacier.2x2.grb&#39;</span>
<span class="go">  FNMXIC   = &#39;global_maxice.2x2.grb&#39;</span>
<span class="go">  FNTSFC   = &#39;RTGSST.1982.2012.monthly.clim.grb&#39;</span>
<span class="go">  FNSNOC   = &#39;global_snoclim.1.875.grb&#39;</span>
<span class="go">  FNZORC   = &#39;igbp&#39;</span>
<span class="go">  FNALBC   = &#39;global_snowfree_albedo.bosu.t126.384.190.rg.grb&#39;</span>
<span class="go">  FNALBC2  = &#39;global_albedo4.1x1.grb&#39;</span>
<span class="go">  FNAISC   = &#39;CFSR.SEAICE.1982.2012.monthly.clim.grb&#39;</span>
<span class="go">  FNTG3C   = &#39;global_tg3clim.2.6x1.5.grb&#39;</span>
<span class="go">  FNVEGC   = &#39;global_vegfrac.0.144.decpercent.grb&#39;</span>
<span class="go">  FNVETC   = &#39;global_vegtype.igbp.t126.384.190.rg.grb&#39;</span>
<span class="go">  FNSOTC   = &#39;global_soiltype.statsgo.t126.384.190.rg.grb&#39;</span>
<span class="go">  FNSMCC   = &#39;global_soilmgldas.t126.384.190.grb&#39;</span>
<span class="go">  FNMSKH   = &#39;seaice_newland.grb&#39;</span>
<span class="go">  FNVMNC   = &#39;global_shdmin.0.144x0.144.grb&#39;</span>
<span class="go">  FNVMXC   = &#39;global_shdmax.0.144x0.144.grb&#39;</span>
<span class="go">  FNSLPC   = &#39;global_slope.1x1.grb&#39;</span>
<span class="go">  FNABSC   = &#39;global_mxsnoalb.uariz.t126.384.190.rg.grb&#39;</span>
<span class="go">/</span>
</pre></div>
</div>
<p>Additional variables for the <code class="docutils literal notranslate"><span class="pre">&amp;namsfc</span></code> namelist can be found in the <code class="docutils literal notranslate"><span class="pre">FV3/ccpp/physics/physics/sfcsub.F</span></code>
file.</p>
</div>
<div class="section" id="atmos-model-nml">
<h4><span class="section-number">4.1.4.3. </span>atmos_model_nml<a class="headerlink" href="#atmos-model-nml" title="Permalink to this headline">¶</a></h4>
<p>The namelist section <code class="docutils literal notranslate"><span class="pre">&amp;atmos_model_nml</span></code> contains information used by the atmosphere model.
The variables used in <code class="docutils literal notranslate"><span class="pre">&amp;atmos_model_nml</span></code> are described in <a class="reference internal" href="#id2"><span class="std std-numref">Table 4.11</span></a>.</p>
<span id="id2"></span><table class="colwidths-given docutils align-default" id="id13">
<caption><span class="caption-number">Table 4.11 </span><span class="caption-text"><em>List of common variables in the *atmos_model_nml</em> namelist section.</span><a class="headerlink" href="#id13" title="Permalink to this table">¶</a></caption>
<colgroup>
<col style="width: 13%" />
<col style="width: 50%" />
<col style="width: 19%" />
<col style="width: 19%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Variable Name</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Data Type</p></th>
<th class="head"><p>Default Value</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>blocksize</p></td>
<td><p>Number of columns in each <code class="docutils literal notranslate"><span class="pre">block</span></code> sent to the physics. OpenMP threading is done over the number of blocks.
For best performance this number should divide the number of grid cells per processor:
<code class="docutils literal notranslate"><span class="pre">((npx-1)*(npy-1)/(layout\_x)*(layout\_y))</span></code>. A description of these variables is provided
<a class="reference external" href="https://noaa-emc.github.io/FV3_Dycore_ufs-v1.1.0/html/group__Parameters__List.html">here</a>.</p></td>
<td><p>integer</p></td>
<td><p>1</p></td>
</tr>
<tr class="row-odd"><td><p>chksum_debug</p></td>
<td><p>If true, compute checksums for all variables passed into the GFS physics, before and after each physics timestep.       This is very useful for reproducibility checking.</p></td>
<td><p>logical</p></td>
<td><p>.false.</p></td>
</tr>
<tr class="row-even"><td><p>dycore_only</p></td>
<td><p>If true, only the dynamical core (and not the GFS physics) is executed when running the model,
essentially running the model as a solo dynamical core.</p></td>
<td><p>logical</p></td>
<td><p>.false.</p></td>
</tr>
<tr class="row-odd"><td><p>debug</p></td>
<td><p>If true, turn on additional diagnostics for the atmospheric model.</p></td>
<td><p>logical</p></td>
<td><p>.false.</p></td>
</tr>
<tr class="row-even"><td><p>sync</p></td>
<td><p>If true, initialize timing identifiers.</p></td>
<td><p>logical</p></td>
<td><p>.false.</p></td>
</tr>
<tr class="row-odd"><td><p>fdiag</p></td>
<td><p>Array with dimension <code class="docutils literal notranslate"><span class="pre">maxhr</span></code> = 4096 listing the diagnostic output times (in hours) for the GFS physics.
This can either be a list of times after initialization, or an interval if only the first entry is
nonzero. The default setting of 0 will result in no outputs.</p></td>
<td><p>real</p></td>
<td><ol class="arabic simple" start="0">
<li></li>
</ol>
</td>
</tr>
<tr class="row-even"><td><p>fhmax</p></td>
<td><p>The maximal forecast time for output.</p></td>
<td><p>real</p></td>
<td><p>384.0</p></td>
</tr>
<tr class="row-odd"><td><p>fhmaxhf</p></td>
<td><p>The maximal forecast hour for high frequency output.</p></td>
<td><p>real</p></td>
<td><p>120.0</p></td>
</tr>
<tr class="row-even"><td><p>fhout</p></td>
<td><p>Output frequency during forecast time from 0 to <code class="docutils literal notranslate"><span class="pre">fhmax</span></code>, or from <code class="docutils literal notranslate"><span class="pre">fhmaxhf</span></code> to <code class="docutils literal notranslate"><span class="pre">fhmax</span></code> if <code class="docutils literal notranslate"><span class="pre">fhmaxf&gt;0</span></code>.</p></td>
<td><p>real</p></td>
<td><p>3.0</p></td>
</tr>
<tr class="row-odd"><td><p>fhouthf</p></td>
<td><p>The high frequency output frequency during the forecast time from 0 to <code class="docutils literal notranslate"><span class="pre">fhmaxhf</span></code> hour.</p></td>
<td><p>real</p></td>
<td><p>1.0</p></td>
</tr>
<tr class="row-even"><td><p>ccpp_suite</p></td>
<td><p>Name of the CCPP physics suite</p></td>
<td><p>character(len=256)</p></td>
<td><p>FV3_GFS_v15p2, set in <code class="docutils literal notranslate"><span class="pre">build.sh</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>avg_max_length</p></td>
<td><p>Forecast interval (in seconds) determining when the maximum values of diagnostic fields in FV3
dynamics are computed.</p></td>
<td><p>real</p></td>
<td><ol class="arabic simple" start="3600">
<li></li>
</ol>
</td>
</tr>
</tbody>
</table>
<p>A sample of this namelist is shown below:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">&amp;atmos_model_nml</span>
<span class="go">  blocksize = 32</span>
<span class="go">  chksum_debug = .false.</span>
<span class="go">  dycore_only = .false.</span>
<span class="go">  fdiag = 1</span>
<span class="go">  fhmax = 384</span>
<span class="go">  fhout = 3</span>
<span class="go">  fhmaxhf = 120</span>
<span class="go">  fhouthf = 1</span>
<span class="go">  ccpp_suite = &#39;FV3_GFS_v16beta&#39;</span>
<span class="go">/</span>
</pre></div>
</div>
<p>The namelist section relating to the FMS diagnostic manager <code class="docutils literal notranslate"><span class="pre">&amp;diag_manager_nml</span></code> is described in <a class="reference internal" href="#diagmanagernml"><span class="std std-numref">Section 4.3.1</span></a>.</p>
</div>
</div>
</div>
<div class="section" id="output-files">
<span id="outputfiles"></span><h2><span class="section-number">4.2. </span>Output files<a class="headerlink" href="#output-files" title="Permalink to this headline">¶</a></h2>
<p>The output files generated when running <em>fv3.exe</em> are defined in the <em>diag_tabl</em> file.  For the default global configuration, the following files are output (six files of each kind, corresponding to the six tiles of the model grid):</p>
<ul class="simple">
<li><p><em>atmos_4xdaily.tile[1-6].nc</em></p></li>
<li><p><em>atmos_static.tile[1-6].nc</em></p></li>
<li><p><em>sfcfHHH.nc</em></p></li>
<li><p><em>atmfHHH.nc</em></p></li>
<li><p><em>grid_spec.tile[1-6].nc</em></p></li>
</ul>
<p>Note that the sfcf* and atmf* files are not output on the 6 tiles, but instead as a single global gaussian grid file.  The specifications of the output files (format, projection, etc) may be overridden in the <em>model_configure</em> input file, see <a class="reference internal" href="#model-configurefile"><span class="std std-numref">Section 4.1.3.3</span></a>.</p>
<p>The regional configuration will generate similar output files, but the <em>tile[1-6]</em> is not included in the filename.</p>
<p>Two files (<em>model_configure</em> and <em>diag_table</em>) control the output that is generated by the UFS Weather Model.  The output files that contain the model variables are written to a file as shown in the figure below.  The format of these output files is selected in <em>model_configure</em> as NetCDF or nemsio.  The information in these files may be remapped, augmented with derived variables, and converted to GRIB2 by the Unified Post Processor (UPP).  Model variables are listed in the <em>diag_table</em> in two groupings, <em>fv3_history</em> and <em>fv3_history2d</em>, as described in <a class="reference internal" href="#diag-tablefile"><span class="std std-numref">Section 4.1.3.1</span></a>.  The names of the files that contain these model variables are specified in the <em>model_configure</em> file. When <em>quilting</em> is set to <em>.true.</em> for the write component, the variables listed in the groups <em>fv3_history</em> and <em>fv3_history2d</em> are converted into the two output files named in the <em>model_configure</em> file, e.g. <em>atmfHHH.</em> and <em>sfcfHHH.</em>. The bases of the file names (<em>atm</em> and <em>sfc</em>) are specified in the <em>model_configure</em> file, and <em>HHH</em> refers to the forecast hour.</p>
<img alt="_images/fv3IO.png" src="_images/fv3IO.png" />
<p>Standard output files are <em>logfHHH</em> (one per forecast hour), and out and err as specified by the job submission. ESMF may also produce log
files (controlled by variable print_esmf in the <em>model_configure</em> file), called <em>PETnnn.ESMF_LogFile</em> (one per MPI task).</p>
<p>Additional output files include: nemsusage.xml, a timing log file; time_stamp.out, contains the model init time; <em>RESTART/*nc</em>, files needed for restart runs.</p>
</div>
<div class="section" id="additional-information-about-the-fms-diagnostic-manager">
<h2><span class="section-number">4.3. </span>Additional Information about the FMS Diagnostic Manager<a class="headerlink" href="#additional-information-about-the-fms-diagnostic-manager" title="Permalink to this headline">¶</a></h2>
<p>The UFS Weather Model output is managed through the FMS (Flexible Modeling System) diagnostic manager (<code class="docutils literal notranslate"><span class="pre">FMS/diag_manager</span></code>)
and is configured using the <em>diag_table</em> file. Data can be written at any number of sampling and/or averaging intervals
specified at run-time.  More information about the FMS diagnostic manager can be found at:
<a class="reference external" href="https://data1.gfdl.noaa.gov/summer-school/Lectures/July16/03_Seth1_DiagManager.pdf">https://data1.gfdl.noaa.gov/summer-school/Lectures/July16/03_Seth1_DiagManager.pdf</a></p>
<div class="section" id="diagnostic-manager-namelist">
<span id="diagmanagernml"></span><h3><span class="section-number">4.3.1. </span>Diagnostic Manager namelist<a class="headerlink" href="#diagnostic-manager-namelist" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">diag_manager_nml</span></code> namelist contains values to control the behavior of the diagnostic manager.   Some
of the more common namelist options are described in <a class="reference internal" href="#diagmanager"><span class="std std-numref">Table 4.12</span></a>.  See
<code class="docutils literal notranslate"><span class="pre">FMS/diag_manager/diag_manager.F90</span></code> for the complete list.</p>
<span id="diagmanager"></span><table class="colwidths-given docutils align-default" id="id14">
<caption><span class="caption-number">Table 4.12 </span><span class="caption-text"><em>Namelist variables used to control the behavior of the diagnostic manager.</em></span><a class="headerlink" href="#id14" title="Permalink to this table">¶</a></caption>
<colgroup>
<col style="width: 23%" />
<col style="width: 15%" />
<col style="width: 46%" />
<col style="width: 15%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Namelist variable</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Default value</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>max_files</p></td>
<td><p>INTEGER</p></td>
<td><p>Maximum number of files allowed in diag_table</p></td>
<td><p>31</p></td>
</tr>
<tr class="row-odd"><td><p>max_output_fields</p></td>
<td><p>INTEGER</p></td>
<td><p>Maximum number of output fields allowed in diag_table</p></td>
<td><p>300</p></td>
</tr>
<tr class="row-even"><td><p>max_input_fields</p></td>
<td><p>INTEGER</p></td>
<td><p>Maximum number of registered fields allowed</p></td>
<td><p>300</p></td>
</tr>
<tr class="row-odd"><td><p>prepend_date</p></td>
<td><p>LOGICAL</p></td>
<td><p>Prepend the file start date to the output file.  .TRUE. is only supported if the diag_manager_init routine is called with the optional time_init parameter.</p></td>
<td><p>.TRUE.</p></td>
</tr>
<tr class="row-even"><td><p>do_diag_field_log</p></td>
<td><p>LOGICAL</p></td>
<td><p>Write out all registered fields to a log file</p></td>
<td><p>.FALSE.</p></td>
</tr>
<tr class="row-odd"><td><p>use_cmor</p></td>
<td><p>LOGICAL</p></td>
<td><p>Override the missing_value to the CMOR value of -1.0e20</p></td>
<td><p>.FALSE.</p></td>
</tr>
<tr class="row-even"><td><p>issue_oor_warnings</p></td>
<td><p>LOGICAL</p></td>
<td><p>Issue a warning if a value passed to diag_manager is outside the given range</p></td>
<td><p>.TRUE.</p></td>
</tr>
<tr class="row-odd"><td><p>oor_warnings_fatal</p></td>
<td><p>LOGICAL</p></td>
<td><p>Treat out-of-range errors as FATAL</p></td>
<td><p>.FALSE.</p></td>
</tr>
<tr class="row-even"><td><p>debug_diag_manager</p></td>
<td><p>LOGICAL</p></td>
<td><p>Check if the diag table is set up correctly</p></td>
<td><p>.FALSE.</p></td>
</tr>
</tbody>
</table>
<p>This release of the UFS Weather Model uses the following namelist:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">&amp;diag_manager_nml</span>
<span class="go">  prepend_date = .false.</span>
<span class="go">/</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="additional-information-about-the-write-component">
<h2><span class="section-number">4.4. </span>Additional Information about the Write Component<a class="headerlink" href="#additional-information-about-the-write-component" title="Permalink to this headline">¶</a></h2>
<p>The UFS Weather Model is built using the Earth System Modeling Framework (ESMF).  As part of this framework, the output history files written by the model use an ESMF component, referred to as the <em>write component</em>.  This model component is configured with settings in the model_configure file, as described in <a class="reference internal" href="#model-configurefile"><span class="std std-numref">Section 4.1.3.3</span></a>.  By using the ESMF capabilities, the write component can generate output files in several different formats and several different map projections.  For example, a Gaussian global grid in NEMSIO format, or a native grid in NetCDF format.  The write component also runs on independent MPI tasks, and so the computational tasks can continue while the write component completes its work asynchronously.  The configuration of write component tasks, balanced with compute tasks, is part of the tuning for each specific application of the model (HPC, write frequency, i/o speed, model domain, etc).  For the global grid, if the write component is not selected (quilting=.false.), the FV3 code will write tiled output in the native projection in NetCDF format.  The regional grid requires the use of the write component.</p>
</div>
</div>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">4. Inputs and Outputs</a><ul>
<li><a class="reference internal" href="#input-files">4.1. Input files</a><ul>
<li><a class="reference internal" href="#static-datasets-i-e-fix-files">4.1.1. Static datasets (i.e., <em>fix files</em>)</a></li>
<li><a class="reference internal" href="#grid-description-and-initial-condition-files">4.1.2. Grid description and initial condition files</a></li>
<li><a class="reference internal" href="#model-configuration-files">4.1.3. Model configuration files</a><ul>
<li><a class="reference internal" href="#diag-table-file">4.1.3.1. <em>diag_table</em> file</a></li>
<li><a class="reference internal" href="#field-table-file">4.1.3.2. <em>field_table</em> file</a></li>
<li><a class="reference internal" href="#model-configure-file">4.1.3.3. <em>model_configure</em> file</a></li>
<li><a class="reference internal" href="#nems-configure-file">4.1.3.4. <em>nems.configure</em> file</a></li>
<li><a class="reference internal" href="#the-sdf-suite-definition-file-file">4.1.3.5. <em>The SDF (Suite Definition File) file</em></a></li>
</ul>
</li>
<li><a class="reference internal" href="#namelist-file-input-nml">4.1.4. Namelist file <code class="docutils literal notranslate"><span class="pre">input.nml</span></code></a><ul>
<li><a class="reference internal" href="#fms-io-nml">4.1.4.1. fms_io_nml</a></li>
<li><a class="reference internal" href="#namsfc">4.1.4.2. namsfc</a></li>
<li><a class="reference internal" href="#atmos-model-nml">4.1.4.3. atmos_model_nml</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#output-files">4.2. Output files</a></li>
<li><a class="reference internal" href="#additional-information-about-the-fms-diagnostic-manager">4.3. Additional Information about the FMS Diagnostic Manager</a><ul>
<li><a class="reference internal" href="#diagnostic-manager-namelist">4.3.1. Diagnostic Manager namelist</a></li>
</ul>
</li>
<li><a class="reference internal" href="#additional-information-about-the-write-component">4.4. Additional Information about the Write Component</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="BuildingAndRunning.html"
                        title="previous chapter"><span class="section-number">3. </span>Building and Running the UFS Weather Model</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="FAQ.html"
                        title="next chapter"><span class="section-number">5. </span>FAQ</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/InputsOutputs.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="FAQ.html" title="5. FAQ"
             >next</a> |</li>
        <li class="right" >
          <a href="BuildingAndRunning.html" title="3. Building and Running the UFS Weather Model"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">UFS Weather Model Users Guide  documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href=""><span class="section-number">4. </span>Inputs and Outputs</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2020.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 3.5.1.
    </div>
  </body>
</html>